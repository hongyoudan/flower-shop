webpackJsonp([20],{"4V1Y":function(e,t){},nOx3:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"product-specs"},[s("el-card",{staticClass:"product-hd",attrs:{shadow:"never"}},[s("div",{staticStyle:{"text-align":"left"},attrs:{slot:"header"},slot:"header"},[s("i",{staticClass:"el-icon-search"}),e._v(" "),s("span",[e._v("筛选搜索")]),e._v(" "),s("el-button",{staticClass:"el-button-search",staticStyle:{right:"111px"},attrs:{type:"primary"},on:{click:function(t){return e.queryProductSpecs()}}},[e._v("查询")]),e._v(" "),s("el-button",{staticClass:"el-button-search",staticStyle:{right:"20px"},on:{click:function(t){return e.resetForm("productSpecsForm")}}},[e._v("重置")])],1),e._v(" "),s("el-form",{ref:"productSpecsForm",staticClass:"query-form",attrs:{model:e.productSpecsForm,inline:""}},[s("el-form-item",{attrs:{label:"输入搜索：",prop:"key"}},[s("el-input",{attrs:{clearable:"",placeholder:"商品类别/规格类型"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.queryProductSpecs(t)}},model:{value:e.productSpecsForm.key,callback:function(t){e.$set(e.productSpecsForm,"key",t)},expression:"productSpecsForm.key"}})],1)],1)],1),e._v(" "),s("el-card",{staticClass:"product-specs-box",attrs:{shadow:"never"}},[s("div",{staticStyle:{"text-align":"left",position:"relative"},attrs:{slot:"header"},slot:"header"},[s("i",{staticClass:"el-icon-coin"}),e._v(" "),s("span",[e._v("数据列表")]),e._v(" "),s("el-button",{staticClass:"el-button-add",on:{click:e.addBrand}},[e._v("添加")])],1),e._v(" "),s("el-table",{staticClass:"type-table",staticStyle:{width:"100%"},attrs:{data:e.productSpecs,height:"425",border:""}},[s("el-table-column",{attrs:{prop:"specsId",label:"编号",width:"170"}}),e._v(" "),s("el-table-column",{attrs:{prop:"productType",label:"商品类型",width:"500"}}),e._v(" "),s("el-table-column",{attrs:{prop:"specsName",label:"规格类型",width:"450"}}),e._v(" "),s("el-table-column",{attrs:{label:"操作",align:"center","min-width":"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{staticStyle:{margin:"0 2%"},attrs:{size:"mini"},on:{click:function(s){return e.openChange(t.$index)}}},[e._v("编辑")]),e._v(" "),s("el-button",{staticStyle:{margin:"0 2%"},attrs:{slot:"reference",size:"mini",type:"danger"},on:{click:function(s){return e.deleteBrand(t.$index,e.productSpecs)}},slot:"reference"},[e._v("删除")])]}}])})],1)],1),e._v(" "),s("el-dialog",{staticClass:"chang-specs",attrs:{title:"编辑商品规格信息","close-on-click-modal":!1,top:"30vh",width:"500px",visible:e.dialogFormVisible,center:""},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[s("el-form",{ref:"changeFrom",staticClass:"info-form",attrs:{inline:"",rules:e.alterRules,model:e.alterForm}},[s("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"商品类型：",prop:"productType"}},[s("el-select",{attrs:{filterable:"",placeholder:"全部",clearable:""},model:{value:e.alterForm.productType,callback:function(t){e.$set(e.alterForm,"productType",t)},expression:"alterForm.productType"}},e._l(e.productType,function(e){return s("el-option",{key:e,attrs:{label:e,value:e}})}),1)],1),e._v(" "),s("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"规格类型：",prop:"specsName"}},[s("el-input",{attrs:{size:"small",placeholder:"规格类型"},model:{value:e.alterForm.specsName,callback:function(t){e.$set(e.alterForm,"specsName",t)},expression:"alterForm.specsName"}})],1)],1),e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{staticStyle:{padding:"12px 33px",margin:"0 25px"},attrs:{type:"primary"},on:{click:function(t){return e.submitChange("changeFrom")}}},[e._v("确 定")]),e._v(" "),s("el-button",{staticStyle:{padding:"12px 33px",margin:"0 25px"},on:{click:function(t){return e.cancelChange("changeFrom")}}},[e._v("取 消")])],1)],1)],1)},staticRenderFns:[]};var c=s("VU/8")({name:"ProductSpecs",data:function(){return{productSpecs:null,productSpecsResource:null,productType:null,handleIndex:0,dialogFormVisible:!1,insert:!1,productSpecsForm:{key:""},alterForm:{specsId:"",productType:"",specsName:""},alterRules:{productType:[{required:!0,message:"请选择商品类型",trigger:"blur"}],specsName:[{required:!0,message:"请输入规格类型",trigger:"blur"},{min:1,max:30,message:"规格类型长度不允许超过 30 个字符",trigger:"blur"}]}}},methods:{resetForm:function(e){this.$refs[e].resetFields()},queryProductSpecs:function(){if(0!==this.productSpecsForm.key.length){this.productSpecs=[];for(var e=0,t=this.productSpecsResource.length;e<t;e++)-1!==this.productSpecsResource[e].productType.indexOf(this.productSpecsForm.key)?this.productSpecs.push(this.productSpecsResource[e]):-1!==this.productSpecsResource[e].specsName.indexOf(this.productSpecsForm.key)&&this.productSpecs.push(this.productSpecsResource[e])}else this.productSpecs=this.productSpecsResource},openChange:function(e){this.handleIndex=e,this.insert=!1,this.alterForm.specsId=this.productSpecs[e].specsId,this.alterForm.productType=this.productSpecs[e].productType,this.alterForm.specsName=this.productSpecs[e].specsName,this.dialogFormVisible=!0},deleteBrand:function(e,t){var s=this,r=this.productSpecs[e].specsName;this.$confirm("此操作将永久删除该商品规格信息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var c=s.$loading({lock:!0,text:"数据提交中",background:"rgba(255,255,255,0.1)"});s.$http.post("/specs/delete?specsId="+s.productSpecs[e].specsId).then(function(o){c.close(),200===o.data.code?(t.splice(e,1),s.reqInfo(),s.$notify({title:"成功",message:"商品规格("+r+")\t移除成功",type:"success"})):s.$notify({title:"错误",message:"商品规格("+r+")\t移除失败",type:"error"})}).catch(function(e){c.close(),s.$msg.error(e)})}).catch(function(){s.$notify({title:"成功",message:"操作取消",type:"success"})})},addBrand:function(){this.alterForm.specsId=null,this.alterForm.productType="",this.alterForm.specsName="",this.insert=!0,this.dialogFormVisible=!0},submitChange:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.insert?t.$http.post("/specs/existsSpecsName?specsId=0&productType="+t.alterForm.productType+"&specsName="+t.alterForm.specsName).then(function(e){if(200===e.data.code)if(e.data.data)t.$alert("品牌("+t.alterForm.productType+")\t已存在，不能重复添加","警告",{confirmButtonText:"确定",type:"warning"});else{var s=t.$loading({lock:!0,text:"数据提交中",background:"rgba(255,255,255,0.1)"});t.$http.post("/specs/add",t.$qs.stringify(t.alterForm,{skipNulls:!0})).then(function(e){s.close(),200===e.data.code?(t.dialogFormVisible=!1,t.reqInfo(),t.$notify({title:"成功",message:"商品规格("+t.alterForm.specsName+")\t添加成功",type:"success"})):t.$notify({title:"错误",message:"商品规格("+t.alterForm.specsName+")\t添加失败",type:"error"})}).catch(function(e){s.close(),t.$msg.error(e)})}}).catch(function(e){t.$msg.error(e)}):t.$http.post("/specs/existsSpecsName?specsId="+t.alterForm.specsId+"&productType="+t.alterForm.productType+"&specsName="+t.alterForm.specsName).then(function(e){if(200===e.data.code)if(e.data.data)t.$alert("商品规格("+t.alterForm.productType+")\t已存在，无法完成修改操作","警告",{confirmButtonText:"确定",type:"warning"});else{var s=t.$loading({lock:!0,text:"数据提交中",background:"rgba(255,255,255,0.1)"});t.$http.post("/specs/update",t.$qs.stringify(t.alterForm,{skipNulls:!0})).then(function(e){s.close(),200===e.data.code?(t.dialogFormVisible=!1,t.reqInfo(),t.$notify({title:"成功",message:"商品规格更新成功",type:"success"})):t.$notify({title:"错误",message:"商品规格更新失败",type:"error"})}).catch(function(e){s.close(),t.$msg.error(e)})}}).catch(function(e){t.$msg.error(e)})})},cancelChange:function(e){this.dialogFormVisible=!1,this.$refs[e].clearValidate(),this.$notify({title:"操作取消",message:"",type:"success"})},reqInfo:function(){var e=this;this.$http.post("/specs/findAll").then(function(t){200===t.data.code&&(e.productSpecsResource=e.productSpecs=t.data.data)}).catch(function(t){e.$msg.error(t)}),this.$http.post("/productType/findAllName").then(function(t){200===t.data.code&&(e.productType=t.data.data)}).catch(function(t){e.$msg.error(t)})}},created:function(){this.reqInfo()}},r,!1,function(e){s("4V1Y")},null,null);t.default=c.exports}});
//# sourceMappingURL=20.b18d794ee5c39c0a9054.js.map