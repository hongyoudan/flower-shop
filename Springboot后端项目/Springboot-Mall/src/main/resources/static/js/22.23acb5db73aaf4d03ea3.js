webpackJsonp([22],{UrGH:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=s("woOf"),a=s.n(o),r=s("mvHQ"),i=s.n(r),n=s("Mpzp"),l={name:"PersonalCenter",data:function(){return{isEdit:!0,isVip:this.$store.state.user.isVip,vipVisible:!1,vip:{overdueTime:""},vipInfo:[{discount:98,desc:"全场商品享受"},{discount:95,desc:"满1000可用"},{discount:90,desc:"满5000可用"}],roles:this.$store.state.roleInfo,backDialogClose:!1,avatarDialogClose:!1,phoneDialogClose:!1,mailDialogClose:!1,mailHide:"",mailCode:"",phoneCode:"",phoneInfo:"",isEditPhone:!0,editPhone:!0,show:!0,count:null,timer:null,options:n.regionData,addressFormVisible:!1,addressForm:{selectedOptions:[],detailAddress:""},addressRules:{selectedOptions:[{validator:function(t,e,s){""===e||0===e.length?s(new Error("请选择收货地址")):s()},trigger:"blur"}],detailAddress:[{validator:function(t,e,s){""===e||0===e.trim().length?s(new Error("请填写详细地址")):s()},trigger:"blur"}]},order:{orderNo:"",productNo:"",userAccount:"",userName:"",contactWay:"",payPrice:"",productSpecs:null,payAmount:1,payType:"",orderFrom:"",orderState:"",returnState:!1,acceptAddress:this.$store.state.user.userAddress},userForm:{userId:this.$store.state.user.userId,accountNumber:this.$store.state.user.accountNumber,userName:this.$store.state.user.userName,userSex:this.$store.state.user.userSex,telephone:this.$store.state.user.telephone,summary:this.$store.state.user.summary,userAddress:this.$store.state.user.userAddress,backgroundUrl:this.$store.state.user.backgroundUrl,avatarUrl:this.$store.state.user.avatarUrl},sexOption:[{value:"男",label:"男"},{value:"女",label:"女"},{value:"保密",label:"保密"}],rules:{userName:[{required:!0,message:"请输入昵称",trigger:"blur"},{min:1,max:20,message:"长度在 1 到 20 个字符",trigger:"blur"}]}}},created:function(){var t=this,e=this.$route.query.serialNumber,s=this.$store.state.vipSerialNumber;"ERROR"===e?this.$msg.error("非常抱歉，未检查到VIP序列号，请联系客服人员协助解决"):s===e&&(this.$store.commit("setVipSerialNumber",""),this.$http.post("/vip/existsVip?accountNumber="+this.$store.state.user.accountNumber).then(function(e){200===e.data.code&&(e.data.data?(t.isVip=!0,t.$store.state.user.isVip=!0,localStorage.setItem("store",i()(t.$store.state)),t.$notify({title:"开通成功",message:"尊贵的用户，欢迎加入花卷VIP",type:"success"}),t.vipVisible=!1,t.vip=e.data.data):t.$http.post("/vip/addVip?accountNumber="+t.$store.state.user.accountNumber).then(function(e){200===e.data.code&&(t.isVip=!0,t.$store.state.user.isVip=!0,localStorage.setItem("store",i()(t.$store.state)),t.$notify({title:"开通成功",message:"尊贵的用户，欢迎加入花卷VIP",type:"success"}),t.vipVisible=!1,t.vip=e.data.data)}).catch(function(e){t.$msg.error(e)}))}).catch(function(e){t.$msg.error(e)}));var o=this.$store.state.user.accountNumber;this.mailHide=o.substr(0,3)+"****"+o.substr(7),this.isVip&&this.$http.post("/vip/findVipByKey?accountNumber="+this.$store.state.user.accountNumber).then(function(e){200===e.data.code&&(t.vip=e.data.data)}).catch(function(e){t.$msg.error(e)})},methods:{getDate:function(t){var e=new Date(t);return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()},openVip:function(){var t=this;this.$confirm("是否开通花卷VIP?","温馨提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.pay()}).catch(function(){})},errorHandler:function(){return!0},editFrom:function(){this.isEdit=!1},submitAddress:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return!1;for(var s="",o=e.addressForm.selectedOptions,a=0,r=o.length;a<r;a++)s+=n.CodeToText[o[a]]+" ";s+="("+e.addressForm.detailAddress+")",e.userForm.userAddress=s,e.addressFormVisible=!1})},submitForm:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return!1;e.$http.post("/allow/update",e.$qs.stringify(e.userForm,{skipNulls:!0})).then(function(t){200===t.data.code?(e.$store.state.user=e.userForm,e.$store.state.user.isVip=e.isVip,localStorage.setItem("store",i()(e.$store.state)),e.$msg.success(t.data.message)):e.$msg.warning(t.data.message)}).catch(function(t){console.log("提交信息时，发生错误"+t),e.$msg.error({message:"网络错误，请稍后再试或联系客服~",showClose:!0,duration:1500})}),e.isEdit=!0})},cancelForm:function(t){this.$refs[t].resetFields(),localStorage.getItem("store")&&this.$store.replaceState(a()({},this.$store.state,JSON.parse(localStorage.getItem("store")))),this.userForm=this.$store.state.user,this.isEdit=!0},uploadSuccess:function(t){var e=this;200===t.code?(this.$http.post("/allow/update?userId="+this.$store.state.user.userId+"&backgroundUrl="+t.data).then(function(s){200===s.data.code?(e.userForm.backgroundUrl=t.data,e.$store.state.user.backgroundUrl=t.data,e.backDialogClose=!1,localStorage.setItem("store",i()(e.$store.state)),e.$msg.success(t.message)):e.$msg.warning(s.data.message)}).catch(function(){e.$msg.error("背景上传失败！")}),this.$refs.backGroundUpload.clearFiles()):this.$msg.error("背景上传失败！")},uploadError:function(){this.$msg.warning("图片上传失败！")},uploadAvaterSuccess:function(t){var e=this;200===t.code?(this.$http.post("/allow/update?userId="+this.$store.state.user.userId+"&avatarUrl="+t.data).then(function(s){200===s.data.code?(e.userForm.avatarUrl=t.data,e.$store.state.user.avatarUrl=t.data,localStorage.setItem("store",i()(e.$store.state)),e.avatarDialogClose=!1,e.$msg.success(t.message)):e.$msg.warning(s.data.message)}).catch(function(){e.$msg.error("头像上传失败！")}),this.$refs.avatarUpload.clearFiles()):this.$msg.error("头像上传失败！")},isCheckMail:function(){var t=this.$store.state.user.accountNumber;null!==sessionStorage.getItem(t)&&this.isExpired(t,3e5)?this.phoneDialogClose=!0:this.mailDialogClose=!0},getCode:function(){var t=this;this.timer||(this.count=60,this.show=!1,this.timer=setInterval(function(){t.count>0&&t.count<=60?t.count--:(t.show=!0,clearInterval(t.timer),t.timer=null)},1e3))},sendEmailCode:function(){var t=this;this.getCode(),this.$http.post("/allow/sendHtmlCode?sendTo="+this.$store.state.user.accountNumber).then(function(e){200===e.data.code?(t.$msg.success({message:e.data.message,showClose:!0,duration:1500}),t.isEditPhone=!1):t.$msg.error({message:e.data.message,showClose:!0,duration:1500})}).catch(function(e){console.log("绑定手机号时，向手机号发送验证码失败"+e),t.$msg.error({message:"网络错误，请稍后再试或联系客服~",showClose:!0,duration:1500})})},bindingPhone:function(){var t=this;0===this.mailCode.trim().length?this.$msg.warning("验证码不能为空"):this.$http.post("/allow/checkCode?key="+this.$store.state.user.accountNumber+"&code="+this.mailCode.trim()).then(function(e){200===e.data.code&&e.data.data?(t.mailDialogClose=!1,t.mailCode="",t.show=!0,t.timer||clearInterval(t.timer),t.setKey(t.$store.state.user.accountNumber,"身份验证成功"),t.timer=null,t.isEditPhone=!0,t.phoneDialogClose=!0,t.$msg.success("身份验证成功，五分钟内无需再次验证")):t.$msg.warning({message:e.data.message,showClose:!0,duration:1500})}).catch(function(e){console.log("邮箱验证身份，后台发生错误"+e),t.$msg.error({message:"网络错误，请稍后再试或联系客服~",showClose:!0,duration:1500})})},editPhoneCode:function(){var t=this;/^((0\d{2,3}-\d{7,8})|(1[3584]\d{9}))$/.test(this.phoneInfo)?this.$http.post("/allow/existPhone?telephone="+this.phoneInfo.trim()).then(function(e){200===e.data.code?!1===e.data.data?(t.getCode(),t.$http.post("/util/smsCode?phone="+t.phoneInfo.trim()).then(function(e){200===e.data.code?(t.$msg.success({message:e.data.message,showClose:!0,duration:1500}),t.editPhone=!1):t.$msg.warning({message:e.data.message,showClose:!0,duration:1500})}).catch(function(e){console.log("绑定手机号时，向手机号发送验证码失败"+e),t.$msg.error({message:"网络错误，请稍后再试或联系客服~",showClose:!0,duration:1500})})):t.$msg.warning("手机号已被绑定，请更换"):t.$msg.error({message:e.data.message,showClose:!0,duration:1500})}).catch(function(e){console.log("验证此手机号是否已被绑定"+e),t.$msg.error({message:"网络错误，请稍后再试或联系客服 "+e,showClose:!0,duration:1500})}):this.$msg.warning("请输入正确手机号")},submitPhone:function(){var t=this;0===this.phoneCode.trim().length?this.$msg.warning("验证码不能为空"):this.$http.post("/allow/checkCode?key="+this.phoneInfo+"&code="+this.phoneCode.trim()).then(function(e){200===e.data.code&&e.data.data?(t.userForm.telephone=t.phoneInfo,t.$store.state.user.telephone=t.phoneInfo,t.$http.post("/allow/update?userId="+t.$store.state.user.userId+"&telephone="+t.userForm.telephone).then(function(e){200===e.data.code?(t.phoneDialogClose=!1,t.show=!0,t.timer||clearInterval(t.timer),t.timer=null,t.editPhone=!0,localStorage.setItem("store",i()(t.$store.state)),t.$msg.success("手机号绑定成功")):t.$msg.warning("手机号绑定失败")}).catch(function(e){console.log("解除绑定手机号发生错误"+e),t.$msg.error({message:"网络错误，请稍后再试或联系客服~",showClose:!0,duration:1500})}),t.phoneInfo="",t.phoneCode=""):t.$msg.warning({message:e.data.message,showClose:!0,duration:1500})}).catch(function(e){console.log("绑定手机号发生错误"+e),t.$msg.error({message:"网络错误，请稍后再试或联系客服~",showClose:!0,duration:1500})})},unbindPhone:function(){var t=this;this.$confirm("将要解除绑定的手机号, 是否继续?","提示",{cancelButtonText:"取消",confirmButtonText:"确定",type:"warning"}).then(function(){t.$store.state.user.telephone=null,t.userForm.telephone=null,t.$http.post("/allow/update?userId="+t.$store.state.user.userId+"&telephone="+t.userForm.telephone).then(function(e){200===e.data.code?(t.phoneDialogClose=!1,localStorage.setItem("store",i()(t.$store.state)),t.$msg.success("已解除手机号绑定")):t.$msg.warning("手机号解绑失败")}).catch(function(e){console.log("解除绑定手机号发生错误"+e),t.$msg.error({message:"网络错误，请稍后再试或联系客服~",showClose:!0,duration:1500})})}).catch(function(){})},setKey:function(t,e){var s=(new Date).getTime();sessionStorage.setItem(t,i()({data:e,time:s}))},isExpired:function(t,e){var s=sessionStorage.getItem(t),o=JSON.parse(s);return!((new Date).getTime()-o.time>e)||(sessionStorage.removeItem(t),!1)},getDateNow:function(){var t=new Date,e=String(t.getFullYear());e=e.substring(2);var s=String(t.getMonth()+1),o=String(t.getDate()),a=String(t.getHours());a.length<2&&(a="0"+a);var r=String(t.getSeconds());r.length<2&&(r="0"+r);var i=Math.floor(90*Math.random()+10+1);this.order.orderNo="Vip"+e+s+o+a+i+r},pay:function(){this.getDateNow(),this.order.productNo="Vip0001",this.order.userAccount=this.$store.state.user.accountNumber,this.order.userName=this.$store.state.user.userName,null!==this.$store.state.user.telephone?this.order.contactWay=this.$store.state.user.telephone:this.order.contactWay="暂无信息",this.order.payPrice=88,this.order.payType="支付宝",this.order.orderFrom="网页商城",this.order.orderState="待付款",this.order.returnState=!1,null!==this.$store.state.user.userAddress?this.order.acceptAddress=this.$store.state.user.userAddress:this.order.acceptAddress="暂无信息",this.createOrder(),this.orderFormVisible=!0},beforeAvatarUpload:function(t){var e="image/jpeg"===t.type,s="image/gif"===t.type,o="image/png"===t.type,a="image/bmp"===t.type,r="image/webp"===t.type,i=t.size/1024/1024<5;return e||s||o||a||r?i||this.$msg.error("上传图片大小不能超过 5MB!"):this.$msg.error("仅支持上传 JPG、JPEG、PNG、GIF、BMP、WEBP 格式文件"),(e||s||o||a||r)&&i},createOrder:function(){var t=this,e=Math.floor(900*Math.random()+100+1).toString();this.$store.commit("setVipSerialNumber",e);var s=this.$loading({lock:!0,text:"订单提交中",background:"rgba(255,255,255,0.1)"});this.$http.post("/order/add",this.$qs.stringify(this.order,{skipNulls:!0})).then(function(o){if(s.close(),200===o.data.code){var a=t.order.orderNo,r=t.order.payPrice,i=t.$loading({lock:!0,text:"正在跳转支付页面",background:"rgba(255,255,255,0.1)"});t.$http.post("/alipay/vip?orderNo="+a+"&orderName=花卷商城-开通花卷Vip支付订单&payPrice="+r+"&serialNumber="+e).then(function(t){i.close();var e=document.createElement("div");e.innerHTML=t.data,document.body.appendChild(e),document.forms[document.forms.length-1].submit()}).catch(function(e){t.$msg.error(e)})}}).catch(function(e){s.close(),t.$msg.error(e)}),this.orderFormVisible=!1}}},c={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"person-center"},[s("div",[s("el-card",{staticClass:"box-card box-abs",attrs:{shadow:"hover"}},[s("div",{staticStyle:{height:"66%",width:"100%",position:"absolute"}},[s("el-image",{staticStyle:{width:"100%",height:"100%"},attrs:{src:this.userForm.backgroundUrl,fit:"none"}},[s("div",{staticStyle:{height:"100%"},attrs:{slot:"error"},slot:"error"},[s("el-image",{staticStyle:{width:"100%",height:"100%"},attrs:{lazy:!0,fit:"none",src:"https://oss-qiu.oss-cn-hangzhou.aliyuncs.com/qiu-blogs-images/background.jpg"}})],1)]),t._v(" "),s("el-button",{staticStyle:{position:"absolute",top:"20px",right:"20px","background-color":"rgba(255,255,255,0)"},attrs:{plain:"",size:"small"},on:{click:function(e){t.backDialogClose=!0}}},[s("i",{staticClass:"el-icon-camera"}),t._v("\n          编辑封面图片\n      ")])],1),t._v(" "),s("div",{staticStyle:{position:"absolute",width:"100%",top:"48%"}},[s("el-avatar",{staticClass:"avatarImg",attrs:{shape:"square",size:140,src:this.userForm.avatarUrl},on:{error:t.errorHandler}},[s("img",{attrs:{src:"https://spring-oss.oss-cn-beijing.aliyuncs.com/images/img/avat.gif",alt:"默认头像"}})]),t._v(" "),s("div",{staticStyle:{display:"inline-block",position:"relative",top:"-22px","margin-left":"35px",height:"50%"}},[s("h1",{staticStyle:{"font-size":"45px","user-select":"text",margin:"0",display:"inline"}},[t._v(t._s(this.userForm.userName))]),t._v(" "),t._l(t.roles,function(e){return s("span",{staticStyle:{"margin-left":"20px","font-size":"14px"}},[s("el-tag",{staticStyle:{position:"relative",top:"-5px","font-size":"15px"},attrs:{type:"success"}},[t._v(t._s(e))])],1)}),t._v(" "),t.isVip?s("el-tag",{staticStyle:{"margin-left":"20px",position:"relative",top:"-5px",cursor:"pointer","font-size":"15px","background-color":"#292C32",color:"#E1BE92"},on:{click:function(e){t.vipVisible=!0}}},[t._v("花卷VIP")]):t._e()],2),t._v(" "),s("el-tooltip",{attrs:{effect:"dark",content:"88元加入花卷VIP",placement:"bottom-start"}},[t.isVip?t._e():s("el-button",{staticStyle:{position:"absolute",right:"160px",bottom:"20px","font-weight":"700",color:"#000","background-color":"rgb(225, 190, 146)"},attrs:{size:"medium"},on:{click:function(e){t.vipVisible=!0}}},[t._v("开通VIP")])],1),t._v(" "),s("el-button",{staticStyle:{position:"absolute",right:"20px",bottom:"20px"},attrs:{plain:"",size:"medium"},on:{click:t.editFrom}},[t._v("编辑个人资料")])],1)]),t._v(" "),s("el-card",{staticClass:"box-card box-info",attrs:{shadow:"hover"}},[s("el-form",{ref:"userForm",staticClass:"personal-form",staticStyle:{height:"100%",padding:"40px 80px"},attrs:{model:t.userForm,disabled:t.isEdit,rules:t.rules,inline:""}},[s("el-form-item",{staticClass:"el-user-item",staticStyle:{position:"relative"}},[t.isVip?s("el-image",{staticStyle:{position:"absolute",top:"-21px",right:"22px",width:"35px"},attrs:{src:"http://img.alicdn.com/tfs/TB1felqRXXXXXa7XXXXXXXXXXXX-22-22.png",alt:"vip"}}):t._e(),t._v(" "),s("el-avatar",{staticStyle:{margin:"0 30px 0 8px"},attrs:{size:80,src:this.userForm.avatarUrl,alt:"头像"},on:{error:t.errorHandler}},[s("img",{attrs:{src:"https://spring-oss.oss-cn-beijing.aliyuncs.com/images/img/avat.gif",alt:"默认头像"}})]),t._v(" "),s("el-button",{staticStyle:{position:"absolute",top:"35%",left:"100%"},attrs:{type:"success",round:"",plain:"",size:"mini"},on:{click:function(e){t.avatarDialogClose=!0}}},[t._v("更改头像")])],1),t._v(" "),s("el-form-item",{staticClass:"el-user-item",attrs:{label:"账号",prop:"accountNumber"}},[s("el-input",{attrs:{readonly:"",placeholder:"账号信息"},model:{value:t.userForm.accountNumber,callback:function(e){t.$set(t.userForm,"accountNumber",e)},expression:"userForm.accountNumber"}})],1),t._v(" "),s("el-form-item",{staticClass:"el-user-item",attrs:{label:"昵称",prop:"userName"}},[s("el-input",{attrs:{placeholder:"昵称信息"},model:{value:t.userForm.userName,callback:function(e){t.$set(t.userForm,"userName",e)},expression:"userForm.userName"}})],1),t._v(" "),s("el-form-item",{staticClass:"el-user-item",attrs:{label:"性别",prop:"userSex"}},[s("el-select",{staticStyle:{width:"206px"},attrs:{placeholder:"未填",clearable:""},model:{value:t.userForm.userSex,callback:function(e){t.$set(t.userForm,"userSex",e)},expression:"userForm.userSex"}},t._l(t.sexOption,function(t){return s("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),s("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"绑定手机后，可使用手机号登录",placement:"bottom-end"}},[s("el-form-item",{staticClass:"el-user-item",attrs:{label:"手机",prop:"telephone"}},[s("el-input",{staticStyle:{width:"83%"},attrs:{placeholder:"手机",readonly:""},model:{value:t.userForm.telephone,callback:function(e){t.$set(t.userForm,"telephone",e)},expression:"userForm.telephone"}}),t._v(" "),s("el-button",{attrs:{size:"mini",icon:"el-icon-edit",circle:""},on:{click:t.isCheckMail}})],1)],1),t._v(" "),s("el-form-item",{staticClass:"el-user-item",attrs:{label:"简介",prop:"summary"}},[s("el-input",{staticStyle:{height:"40px",width:"206px"},attrs:{type:"textarea",rows:1,placeholder:"填写你的个人简介"},model:{value:t.userForm.summary,callback:function(e){t.$set(t.userForm,"summary",e)},expression:"userForm.summary"}})],1),t._v(" "),s("el-form-item",{staticClass:"el-user-item address",attrs:{label:"地址",prop:"userAddress"}},[s("el-input",{staticStyle:{width:"206px",position:"absolute"},attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"地址",readonly:""},model:{value:t.userForm.userAddress,callback:function(e){t.$set(t.userForm,"userAddress",e)},expression:"userForm.userAddress"}}),t._v(" "),s("el-button",{staticStyle:{position:"absolute",right:"-37px",margin:"10px 0"},attrs:{size:"mini",icon:"el-icon-edit",circle:""},on:{click:function(e){t.addressFormVisible=!0}}})],1),t._v(" "),s("el-row",{staticStyle:{"text-align":"center",margin:"20px auto"}},[t.isEdit?t._e():s("el-button",{staticStyle:{width:"150px",margin:"0 4%"},attrs:{type:"primary",round:""},on:{click:function(e){return t.submitForm("userForm")}}},[t._v("保存")]),t._v(" "),t.isEdit?t._e():s("el-button",{staticStyle:{width:"150px",margin:"0 4%"},attrs:{round:""},on:{click:function(e){return t.cancelForm("userForm")}}},[t._v("取消")])],1)],1)],1)],1),t._v(" "),s("el-dialog",{staticClass:"personal-dialog",staticStyle:{"text-align":"center"},attrs:{title:"背景图片",visible:t.backDialogClose,width:"20%"},on:{"update:visible":function(e){t.backDialogClose=e}}},[s("el-upload",{ref:"backGroundUpload",staticClass:"personal-upload",attrs:{action:this.$VAR.http+"/uploadImage?name=background","on-success":t.uploadSuccess,"on-error":t.uploadError,"before-upload":t.beforeAvatarUpload,drag:!0,"list-type":"picture"}},[s("i",{staticClass:"el-icon-plus"})]),t._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(e){t.backDialogClose=!1}}},[t._v("取 消")])],1)],1),t._v(" "),s("el-dialog",{staticClass:"personal-dialog",staticStyle:{"text-align":"center"},attrs:{title:"上传头像",visible:t.avatarDialogClose,width:"20%"},on:{"update:visible":function(e){t.avatarDialogClose=e}}},[s("el-upload",{ref:"avatarUpload",staticClass:"personal-upload",attrs:{action:this.$VAR.http+"/uploadImage?name=userAvatar","on-success":t.uploadAvaterSuccess,"on-error":t.uploadError,drag:!0,"before-upload":t.beforeAvatarUpload,"list-type":"picture"}},[s("i",{staticClass:"el-icon-plus"})]),t._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(e){t.avatarDialogClose=!1}}},[t._v("取 消")])],1)],1),t._v(" "),s("el-dialog",{staticClass:"phone-dialog",attrs:{title:"安全验证",visible:t.mailDialogClose,width:"20%"},on:{"update:visible":function(e){t.mailDialogClose=e}}},[s("p",{staticStyle:{"text-align":"left"}},[t._v("\n      为了保证你的帐号安全，请先验证身份，验证成功后进行下一步操作，验证码10分钟内有效\n    ")]),t._v(" "),s("h3",[t._v("用邮箱"+t._s(this.mailHide)+"验证")]),t._v(" "),s("div",{staticStyle:{position:"relative"}},[s("el-input",{attrs:{placeholder:"验证码"},model:{value:t.mailCode,callback:function(e){t.mailCode=e},expression:"mailCode"}},[s("i",{staticClass:"el-input__icon el-icon-position",attrs:{slot:"prefix"},slot:"prefix"})]),t._v(" "),s("el-button",{staticStyle:{position:"absolute",right:"3px",top:"0",margin:"4px 0"},attrs:{type:"primary",round:"",size:"small",disabled:!t.show},on:{click:t.sendEmailCode}},[s("span",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}]},[t._v("发送验证码")]),t._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:!t.show,expression:"!show"}],staticClass:"count"},[t._v("重新发送("+t._s(t.count)+"s)")])])],1),t._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary",disabled:t.isEditPhone},on:{click:t.bindingPhone}},[t._v("确 定")]),t._v(" "),s("el-button",{on:{click:function(e){t.mailDialogClose=!1}}},[t._v("取 消")])],1)]),t._v(" "),s("el-dialog",{staticClass:"phone-dialog",attrs:{title:"绑定手机号",visible:t.phoneDialogClose,width:"20%"},on:{"update:visible":function(e){t.phoneDialogClose=e}}},[s("el-input",{staticStyle:{margin:"10px 0"},attrs:{placeholder:"请输入你常用的手机号"},model:{value:t.phoneInfo,callback:function(e){t.phoneInfo=e},expression:"phoneInfo"}},[s("i",{staticClass:"el-input__icon el-icon-mobile-phone",attrs:{slot:"prefix"},slot:"prefix"})]),t._v(" "),s("div",{staticStyle:{position:"relative"}},[s("el-input",{attrs:{placeholder:"验证码"},model:{value:t.phoneCode,callback:function(e){t.phoneCode=e},expression:"phoneCode"}},[s("i",{staticClass:"el-input__icon el-icon-position",attrs:{slot:"prefix"},slot:"prefix"})]),t._v(" "),s("el-button",{staticStyle:{position:"absolute",right:"3px",top:"0",margin:"4px 0"},attrs:{type:"primary",round:"",size:"small",disabled:!t.show},on:{click:function(e){return t.editPhoneCode()}}},[s("span",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}]},[t._v("发送验证码")]),t._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:!t.show,expression:"!show"}],staticClass:"count"},[t._v("重新发送("+t._s(t.count)+"s)")])])],1),t._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary",disabled:t.editPhone},on:{click:t.submitPhone}},[this.userForm.telephone?s("span",[t._v("更 换")]):s("span",[t._v("确 定")])]),t._v(" "),this.userForm.telephone?s("el-button",{on:{click:t.unbindPhone}},[t._v("解 绑")]):s("el-button",{on:{click:function(e){t.phoneDialogClose=!1}}},[t._v("取 消")])],1)],1),t._v(" "),s("el-dialog",{staticClass:"address-dialog",attrs:{title:"地址信息",width:"450px",visible:t.addressFormVisible},on:{"update:visible":function(e){t.addressFormVisible=e}}},[s("el-form",{ref:"addressForm",attrs:{model:t.addressForm,rules:t.addressRules}},[s("el-form-item",{attrs:{label:"所在地区",prop:"selectedOptions"}},[s("el-cascader",{attrs:{size:"large",options:t.options,separator:" "},model:{value:t.addressForm.selectedOptions,callback:function(e){t.$set(t.addressForm,"selectedOptions",e)},expression:"addressForm.selectedOptions"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"详细地址",prop:"detailAddress"}},[s("el-input",{staticStyle:{width:"auto"},attrs:{autocomplete:"off"},model:{value:t.addressForm.detailAddress,callback:function(e){t.$set(t.addressForm,"detailAddress",e)},expression:"addressForm.detailAddress"}},[s("i",{staticClass:"el-icon-edit el-input__icon",attrs:{slot:"suffix"},slot:"suffix"})])],1)],1),t._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(e){t.addressFormVisible=!1}}},[t._v("取 消")]),t._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitAddress("addressForm")}}},[t._v("确 定")])],1)],1),t._v(" "),s("el-dialog",{staticClass:"vip-dialog",attrs:{title:"花卷VIP",visible:t.vipVisible,"show-close":t.isVip,top:"0",modal:!1},on:{"update:visible":function(e){t.vipVisible=e}}},[t.isVip?s("span",{staticStyle:{color:"#F8C4A2"}},[t._v(t._s(t.getDate(t.vip.overdueTime))+" 到期")]):s("span",{staticStyle:{color:"#F8C4A2"}},[t._v("开通仅需88元")]),t._v(" "),s("div",{staticClass:"vip-box"},t._l(t.vipInfo,function(e,o){return s("div",{key:o,staticClass:"discount-card"},[s("h3",[t._v("折扣卡")]),t._v(" "),s("div",[s("span",{staticStyle:{"font-size":"xx-large",color:"#F8313C"}},[t._v(t._s(e.discount))]),t._v(" "),s("span",{staticStyle:{color:"#F8313C"}},[t._v("折")])]),t._v(" "),s("h6",[t._v(t._s(e.desc))]),t._v(" "),s("div",{staticClass:"vip-use"},[s("el-button",{staticClass:"mini-button",attrs:{type:"danger",size:"mini",round:""},on:{click:function(e){return t.$router.push("/MallHome")}}},[t._v("立即使用")])],1),t._v(" "),s("div",{staticClass:"left-dots"}),t._v(" "),s("div",{staticClass:"right-dots"})])}),0),t._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t.isVip?t._e():s("el-button",{attrs:{type:"primary"},on:{click:t.openVip}},[t._v("开通")]),t._v(" "),t.isVip?t._e():s("el-button",{on:{click:function(e){t.vipVisible=!1}}},[t._v("取消")])],1)])],1)},staticRenderFns:[]};var u=s("VU/8")(l,c,!1,function(t){s("mPhx")},null,null);e.default=u.exports},mPhx:function(t,e){}});
//# sourceMappingURL=22.23acb5db73aaf4d03ea3.js.map