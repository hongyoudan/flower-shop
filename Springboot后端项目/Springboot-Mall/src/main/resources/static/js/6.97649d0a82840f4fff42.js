webpackJsonp([6],{"N/GI":function(t,e){},fRfP:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"product-brand"},[r("el-card",{staticClass:"product-hd",attrs:{shadow:"never"}},[r("div",{staticStyle:{"text-align":"left"},attrs:{slot:"header"},slot:"header"},[r("i",{staticClass:"el-icon-search"}),t._v(" "),r("span",[t._v("筛选搜索")]),t._v(" "),r("el-button",{staticClass:"el-button-search",staticStyle:{right:"111px"},attrs:{type:"primary"},on:{click:function(e){return t.queryProductBrand()}}},[t._v("查询")]),t._v(" "),r("el-button",{staticClass:"el-button-search",staticStyle:{right:"20px"},on:{click:function(e){return t.resetForm("productBrandForm")}}},[t._v("重置")])],1),t._v(" "),r("el-form",{ref:"productBrandForm",staticClass:"query-form",attrs:{model:t.productBrandForm,inline:""}},[r("el-form-item",{attrs:{label:"输入搜索：",prop:"key"}},[r("el-input",{attrs:{clearable:"",placeholder:"品牌名称/关键字"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.queryProductBrand(e)}},model:{value:t.productBrandForm.key,callback:function(e){t.$set(t.productBrandForm,"key",e)},expression:"productBrandForm.key"}})],1)],1)],1),t._v(" "),r("el-card",{staticClass:"product-box",attrs:{shadow:"never"}},[r("div",{staticStyle:{"text-align":"left",position:"relative"},attrs:{slot:"header"},slot:"header"},[r("i",{staticClass:"el-icon-coin"}),t._v(" "),r("span",[t._v("数据列表")]),t._v(" "),r("el-button",{staticClass:"el-button-add",on:{click:t.addBrand}},[t._v("添加")])],1),t._v(" "),r("el-table",{staticClass:"brand-table",staticStyle:{width:"100%"},attrs:{data:t.productBrand,height:"425",border:""}},[r("el-table-column",{attrs:{prop:"brandId",label:"编号",width:"150"}}),t._v(" "),r("el-table-column",{attrs:{prop:"brandName",label:"品牌名称",width:"350"}}),t._v(" "),r("el-table-column",{attrs:{prop:"brandDescribe",label:"品牌描述",width:"600"}}),t._v(" "),r("el-table-column",{attrs:{label:"操作",align:"center","min-width":"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-button",{staticStyle:{margin:"0 2%"},attrs:{size:"mini"},on:{click:function(r){return t.openChange(e.$index)}}},[t._v("编辑")]),t._v(" "),r("el-button",{staticStyle:{margin:"0 2%"},attrs:{slot:"reference",size:"mini",type:"danger"},on:{click:function(r){return t.deleteBrand(e.$index,t.productBrand)}},slot:"reference"},[t._v("删除")])]}}])})],1)],1),t._v(" "),r("el-dialog",{staticClass:"chang-product",attrs:{title:"编辑商品品牌信息","close-on-click-modal":!1,visible:t.dialogFormVisible,center:""},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[r("el-form",{ref:"changeFrom",staticClass:"info-form",attrs:{inline:"",rules:t.alterRules,model:t.alterForm}},[r("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"品牌名称：",prop:"brandName"}},[r("el-input",{attrs:{size:"small",placeholder:"品牌名称"},model:{value:t.alterForm.brandName,callback:function(e){t.$set(t.alterForm,"brandName",e)},expression:"alterForm.brandName"}})],1),t._v(" "),r("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"品牌描述：",prop:"brandDescribe"}},[r("el-input",{attrs:{size:"small",type:"textarea",autosize:"",placeholder:"品牌描述"},model:{value:t.alterForm.brandDescribe,callback:function(e){t.$set(t.alterForm,"brandDescribe",e)},expression:"alterForm.brandDescribe"}})],1)],1),t._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{staticStyle:{padding:"12px 54px",margin:"0 55px"},attrs:{type:"primary"},on:{click:function(e){return t.submitChange("changeFrom")}}},[t._v("确 定")]),t._v(" "),r("el-button",{staticStyle:{padding:"12px 54px",margin:"0 55px"},on:{click:function(e){return t.cancelChange("changeFrom")}}},[t._v("取 消")])],1)],1)],1)},staticRenderFns:[]};var n=r("VU/8")({name:"ProductBrand",data:function(){return{productBrand:null,productBrandResource:null,handleIndex:0,dialogFormVisible:!1,insert:!1,productBrandForm:{key:""},alterForm:{brandId:"",brandName:"",brandDescribe:""},alterRules:{brandName:[{required:!0,message:"请输入品牌名称",trigger:"blur"},{min:1,max:30,message:"名称长度不允许超过 30 个字符",trigger:"blur"}],brandDescribe:[{required:!0,message:"请输入品牌描述",trigger:"blur"},{min:1,max:100,message:"描述信息长度不允许超过 100 个字符",trigger:"blur"}]}}},methods:{resetForm:function(t){this.$refs[t].resetFields()},queryProductBrand:function(){if(0!==this.productBrandForm.key.length){this.productBrand=[];for(var t=0,e=this.productBrandResource.length;t<e;t++)-1!==this.productBrandResource[t].brandName.indexOf(this.productBrandForm.key)&&this.productBrand.push(this.productBrandResource[t])}else this.productBrand=this.productBrandResource},openChange:function(t){this.handleIndex=t,this.insert=!1,this.alterForm.brandId=this.productBrand[t].brandId,this.alterForm.brandName=this.productBrand[t].brandName,this.alterForm.brandDescribe=this.productBrand[t].brandDescribe,this.dialogFormVisible=!0},deleteBrand:function(t,e){var r=this,a=this.productBrand[t].brandName;this.$http.post("/product/existsBrand?productBrand="+a).then(function(n){200===n.data.code&&(n.data.data?r.$alert("品牌("+a+")\t下存在商品，无法删除","警告",{confirmButtonText:"确定",type:"warning"}):r.$confirm("此操作将永久删除该品牌信息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var n=r.$loading({lock:!0,text:"数据提交中",background:"rgba(255,255,255,0.1)"});r.$http.post("/productBrand/deleteById?brandId="+r.productBrand[t].brandId).then(function(o){n.close(),200===o.data.code?(e.splice(t,1),r.$notify({title:"成功",message:"品牌("+a+")\t移除成功",type:"success"})):r.$notify({title:"错误",message:o.data.message,type:"error"})}).catch(function(t){n.close(),r.$msg.error(t)})}).catch(function(){r.$notify({title:"成功",message:"操作取消",type:"success"})}))}).catch(function(t){r.$msg.error(t)})},addBrand:function(){delete this.alterForm.brandId,this.alterForm.brandName="",this.alterForm.brandDescribe="",this.insert=!0,this.dialogFormVisible=!0},submitChange:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return!1;e.insert?e.$http.post("/productBrand/existsBrandName?brandId=0&brandName="+e.alterForm.brandName).then(function(t){if(200===t.data.code)if(t.data.data)e.$alert("品牌("+e.alterForm.brandName+")\t已存在，不能重复添加","警告",{confirmButtonText:"确定",type:"warning"});else{var r=e.$loading({lock:!0,text:"数据提交中",background:"rgba(255,255,255,0.1)"});e.$http.post("/productBrand/add",e.$qs.stringify(e.alterForm)).then(function(t){r.close(),200===t.data.code?(e.dialogFormVisible=!1,e.reqInfo(),e.$notify({title:"成功",message:e.alterForm.brandName+"\t品牌添加成功",type:"success"})):e.$notify({title:"错误",message:t.data.message,type:"error"})}).catch(function(t){r.close(),e.$msg.error(t)})}}).catch(function(t){e.$msg.error(t)}):e.$http.post("/productBrand/existsBrandName?brandId="+e.productBrand[e.handleIndex].brandId+"&brandName="+e.alterForm.brandName).then(function(t){if(200===t.data.code)if(t.data.data)e.$alert("品牌("+e.alterForm.brandName+")\t已存在，无法完成修改操作","警告",{confirmButtonText:"确定",type:"warning"});else{var r=e.$loading({lock:!0,text:"数据提交中",background:"rgba(255,255,255,0.1)"});e.$http.post("/productBrand/update",e.$qs.stringify(e.alterForm)).then(function(t){r.close(),200===t.data.code?(e.dialogFormVisible=!1,e.productBrand[e.handleIndex]=e.alterForm,e.$notify({title:"成功",message:"品牌信息更新成功",type:"success"})):e.$notify({title:"错误",message:t.data.message,type:"error"})}).catch(function(t){r.close(),e.$msg.error(t)})}}).catch(function(t){e.$msg.error(t)})})},cancelChange:function(t){this.dialogFormVisible=!1,this.$refs[t].resetFields(),this.$notify({title:"操作取消",message:"",type:"success"})},reqInfo:function(){var t=this;this.$http.post("/productBrand/findAll").then(function(e){200===e.data.code&&(t.productBrandResource=t.productBrand=e.data.data)}).catch(function(e){t.$msg.error(e)})}},created:function(){this.reqInfo()}},a,!1,function(t){r("N/GI")},null,null);e.default=n.exports}});
//# sourceMappingURL=6.97649d0a82840f4fff42.js.map