{"version":3,"sources":["webpack:///src/components/product/ProductAdd.vue","webpack:///./src/components/product/ProductAdd.vue?ba03","webpack:///./src/components/product/ProductAdd.vue"],"names":["ProductAdd","name","data","productBrandInfo","productTypeInfo","productId","productForm","productNo","productName","productBrand","productType","productDescribe","inPrice","outPrice","productStock","lowestStock","isNew","isSale","isStockOut","productUrl","productSpec","productSpecs","productRules","required","message","trigger","min","max","methods","uploadProductUrlSuccess","response","code","this","$msg","success","$refs","clearFiles","error","getDateNow","_this","time","Date","year","String","getFullYear","mouth","getMonth","day","getDate","hours","getHours","length","minutes","getMinutes","seconds","getSeconds","$http","post","then","rep","count","catch","err","querySpec","_this2","submitForm","formName","_this3","validate","valid","trim","loading","$loading","lock","text","background","$qs","stringify","close","$notify","title","type","resetFields","submitSpec","resetForm","sleep","that","setTimeout","beforeAvatarUpload","file","isJPG","isGIF","isPNG","isBMP","isWEBP","isLt5M","size","created","_this4","product_ProductAdd","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","shadow","staticStyle","text-align","slot","_v","ref","model","inline","rules","width","label","prop","value","callback","$$v","$set","expression","filterable","placeholder","on","change","$event","_l","item","index","key","multiple","specsId","specsName","height","margin-right","show-word-limit","autosize","minRows","maxRows","display","justify-content","align-items","action","$VAR","http","on-success","before-upload","drag","list-type","src","position","bottom","left","margin","click","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/8.11a72be07ac6b402f3d5.js","sourcesContent":["<!--添加商品组件-->\r\n<template>\r\n  <div class=\"product-add\">\r\n    <el-card class=\"product-box\" shadow=\"hover\">\r\n      <div slot=\"header\" style=\"text-align: left\">\r\n        <i class=\"el-icon-circle-plus-outline\"/>\r\n        <span>添加商品</span>\r\n      </div>\r\n      <div class=\"info-box\">\r\n        <el-form class=\"product-form\" :model=\"productForm\" :inline=\"true\" :rules=\"productRules\" ref=\"ruleForm\">\r\n          <el-form-item label=\"商品名称：\" prop=\"productName\" style=\"width: 100%\">\r\n            <el-input size=\"small\" v-model=\"productForm.productName\" style=\"width: 300px\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"商品分类：\" prop=\"productType\" style=\"width: 45%\">\r\n            <el-select size=\"small\" v-model=\"productForm.productType\" @change=\"querySpec(productForm.productType)\" filterable placeholder=\"请选择类别\">\r\n              <el-option v-for=\"(item,index) in productTypeInfo\" :key=\"index\" :label=\"item\" :value=\"item\"></el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n          <el-form-item label=\"商品规格：\" prop=\"productSpec\" style=\"width: 50%\">\r\n            <el-select size=\"small\" class=\"select-spec\" v-model=\"productSpec\" multiple placeholder=\"请选择商品规格\" style=\"width: 245px;\">\r\n              <el-option v-for=\"item in productSpecs\"  :key=\"item.specsId\" :label=\"item.specsName\" :value=\"item.specsId\"></el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n          <el-form-item label=\"商品品牌：\" prop=\"productBrand\" style=\"width: 100%\">\r\n            <el-select size=\"small\" v-model=\"productForm.productBrand\" filterable placeholder=\"请选择品牌\">\r\n              <el-option v-for=\"(item,index) in productBrandInfo\" :key=\"index\" :label=\"item\" :value=\"item\"></el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n          <el-form-item label=\"商品进价：\" prop=\"inPrice\" style=\"width: 45%;\">\r\n            <el-input min=0 size=\"small\" type='number' v-model=\"productForm.inPrice\" placeholder=\"商品进价\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"商品库存：\" prop=\"productStock\" style=\"width: 45%;\">\r\n            <el-input-number size=\"small\" :min=0 :max=1000 v-model=\"productForm.productStock\" placeholder=\"商品库存\"></el-input-number>\r\n          </el-form-item>\r\n          <el-form-item label=\"商品售价：\" prop=\"outPrice\" style=\"width: 45%;\">\r\n            <el-input min=0 size=\"small\" type='number' v-model=\"productForm.outPrice\" placeholder=\"商品售价\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"最低库存：\" prop=\"lowestStock\" style=\"width: 45%;\">\r\n            <el-input-number size=\"small\" :min=0 :max=1000 v-model=\"productForm.lowestStock\" placeholder=\"最低库存\"></el-input-number>\r\n          </el-form-item>\r\n          <el-form-item label=\"商品状态：\" style=\"width: 100%;height: 30px\">\r\n            <el-form-item label=\"上架\" prop=\"isSale\" style=\"margin-right:50px\">\r\n              <el-switch v-model=\"productForm.isSale\"></el-switch>\r\n            </el-form-item>\r\n            <el-form-item label=\"新品\" prop=\"isNew\">\r\n              <el-switch v-model=\"productForm.isNew\"></el-switch>\r\n            </el-form-item>\r\n          </el-form-item>\r\n          <el-form-item label=\"商品介绍：\" prop=\"productDescribe\" style=\"width: 45%;\">\r\n            <el-input type=\"textarea\" class=\"product-desc\" size=\"small\" show-word-limit :autosize=\"{ minRows: 1, maxRows: 4}\"  v-model=\"productForm.productDescribe\" placeholder=\"商品描述\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"商品图片：\" prop=\"productUrl\" style=\"width: 45%;\">\r\n            <el-upload\r\n              class=\"product-upload\"\r\n              :action=\"this.$VAR.http+'/uploadImage?name=productImage'\"\r\n              :on-success=\"uploadProductUrlSuccess\"\r\n              :before-upload=\"beforeAvatarUpload\"\r\n              :drag=\"true\"\r\n              list-type=\"picture\"\r\n              style=\"display: flex;justify-content: center;align-items: center;height: 140px;width: 160px\"\r\n              ref=\"productUpload\">\r\n              <el-image v-if=\"productForm.productUrl\" :src=\"productForm.productUrl\" style=\"height: 140px;width: 160px\"></el-image>\r\n              <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n            </el-upload>\r\n          </el-form-item>\r\n          <el-form-item style=\"width:100%;text-align: center;position: absolute;bottom: -14px;left: 0\">\r\n            <el-button  @click=\"submitForm('ruleForm')\" type=\"primary\" style=\"margin: 0 55px\">添加商品</el-button>\r\n            <el-button @click=\"resetForm('ruleForm')\" style=\"margin: 0 55px\">取消重置</el-button>\r\n          </el-form-item>\r\n        </el-form>\r\n      </div>\r\n    </el-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  export default {\r\n    name: \"ProductAdd\",\r\n    data() {\r\n      return {\r\n        productBrandInfo:'',\r\n        productTypeInfo:'',\r\n        productId:'',\r\n        productForm:{\r\n          productNo:'',\r\n          productName:'',\r\n          productBrand:'',\r\n          productType:'',\r\n          productDescribe:'',\r\n          inPrice:0,\r\n          outPrice:0,\r\n          productStock:50,\r\n          lowestStock:50,\r\n          isNew:true,\r\n          isSale:true,\r\n          isStockOut:false,\r\n          productUrl:'',\r\n        },\r\n        productSpec:[],\r\n        productSpecs:[],\r\n        productRules:{\r\n          productName: [{ required: true, message: '请填写商品名称', trigger: 'blur' },\r\n                  { min: 1, max: 30, message: '名称长度不允许超过 30 个字符', trigger: 'blur' }],\r\n          productBrand: [{ required: true, message: '请选择商品品牌', trigger: 'blur' }],\r\n          productType: [{ required: true, message: '请选择商品分类', trigger: 'blur' }],\r\n          productDescribe: [{ required: true, message: '请填写商品介绍', trigger: 'blur' },\r\n            { min: 1, max: 100, message: '名称长度不允许超过 100 个字符', trigger: 'blur' }],\r\n          productUrl: [{ required: true, message: '请上传商品图片', trigger: 'blur' }],\r\n        }\r\n      }\r\n    },\r\n    methods: {\r\n      //上传图片URL\r\n      uploadProductUrlSuccess(response){\r\n        if(response.code===200){\r\n          this.$msg.success(\"商品图片上传成功！\")\r\n          this.productForm.productUrl=response.data;\r\n          this.$refs['productUpload'].clearFiles();\r\n        }else{\r\n          this.$msg.error(\"商品图片上传失败！\")\r\n        }\r\n      },\r\n      //根据时间获取商品编号\r\n      getDateNow(){\r\n        let time = new Date(); // 时间戳\r\n        let year= String(time.getFullYear()); // 年\r\n        let mouth= String(time.getMonth() + 1); // 月\r\n        let day= String(time.getDate()); // 日\r\n        let hours= String(time.getHours()); // 时\r\n        if(hours.length<2){\r\n          hours='0' + hours\r\n        }\r\n        let minutes= String(time.getMinutes()); // 分\r\n        if(minutes.length<2) {\r\n          minutes='0' + minutes\r\n        }\r\n        let seconds= String(time.getSeconds()); // 秒\r\n        if(seconds.length<2) {\r\n          seconds='0' + seconds\r\n        }\r\n        this.$http.post('/product/findCount').then((rep)=>{\r\n          if(rep.data.code ===200){\r\n            let count= rep.data.data;\r\n            this.productForm.productNo = year + mouth + day + hours + minutes + seconds +count;\r\n          }else{\r\n            this.$msg.error(rep.data.message);\r\n          }\r\n        }).catch((err)=>{\r\n          this.$msg.error(err);\r\n        })\r\n      },\r\n      querySpec(productType){\r\n        this.productSpec.length=0;\r\n        this.$http.post('/specs/findAllByType?productType='+productType).then((rep)=>{\r\n          if(rep.data.code===200){\r\n            this.productSpecs = rep.data.data;\r\n          }\r\n        }).catch((err)=>{this.$msg.error(err)})\r\n      },\r\n      //提交表单\r\n      submitForm(formName) {\r\n        this.$refs[formName].validate((valid) => {\r\n          if (valid) {\r\n            this.productForm.productName = this.productForm.productName.trim();\r\n            this.productForm.productDescribe = this.productForm.productDescribe.trim();\r\n            let loading = this.$loading({lock: true, text: \"数据提交中\",background:\"rgba(255,255,255,0.1)\"});\r\n            this.productForm.isStockOut = this.productForm.productStock < this.productForm.lowestStock;\r\n            this.$http.post('/product/add',this.$qs.stringify(this.productForm)).then((rep)=>{\r\n              loading.close();\r\n              if(rep.data.code===200){\r\n                this.$notify({title: '成功', message: this.productForm.productName+'\\t添加成功', type: 'success'});\r\n                this.$refs[formName].resetFields();\r\n                this.getDateNow();\r\n                if(this.productSpec.length!==0){\r\n                  this.productId=null;\r\n                  this.submitSpec(this.productForm.productNo);\r\n                }\r\n              }else{\r\n                this.$notify.error({title: '失败', message: rep.data.message});\r\n              }\r\n            }).catch((err)=>{loading.close();this.$msg.error(err)})\r\n          } else {\r\n            return false;\r\n          }\r\n        });\r\n      },\r\n      //重置表单\r\n      resetForm(formName) {\r\n        this.getDateNow();\r\n        this.$refs[formName].resetFields();\r\n      },\r\n      sleep(time,productNo){\r\n        let that = this;\r\n        setTimeout(function(){\r\n          that.$http.post('/product/findIdByKey?productNo='+productNo).then((rep)=>{\r\n            if(rep.data.code===200){that.productId = rep.data.data;}\r\n          }).catch((err)=>{that.$msg.error(err)})\r\n          if(that.productId!==null){\r\n            that.$http.post('/productSpecs/addBatch?productId='+that.productId+'&specsIds='+that.productSpec);\r\n            that.productSpec=[];\r\n          }else{\r\n            that.sleep(1000,productNo);\r\n          }\r\n        }, time);\r\n\r\n      },\r\n      beforeAvatarUpload(file) {\r\n        const isJPG = file.type === 'image/jpeg';\r\n        const isGIF = file.type === 'image/gif';\r\n        const isPNG = file.type === 'image/png';\r\n        const isBMP = file.type === 'image/bmp';\r\n        const isWEBP = file.type === 'image/webp';\r\n        const isLt5M = file.size / 1024 / 1024 < 5;\r\n\r\n        if (!(isJPG || isGIF || isPNG || isBMP || isWEBP)) {\r\n          this.$msg.error('仅支持上传 JPG、JPEG、PNG、GIF、BMP、WEBP 格式文件');\r\n        }else{\r\n          if (!isLt5M) {\r\n            this.$msg.error('上传图片大小不能超过 5MB!');\r\n          }\r\n        }\r\n        return (isJPG || isGIF || isPNG || isBMP || isWEBP) && isLt5M;\r\n      },\r\n      submitSpec(productNo){\r\n        this.sleep(1000,productNo);\r\n      }\r\n    },\r\n    created() {\r\n      this.$http.post('/productBrand/findAllName').then((rep)=>{\r\n        if(rep.data.code===200){\r\n          this.productBrandInfo=rep.data.data;\r\n        }\r\n      }).catch((err)=>{this.$msg.error(err)})\r\n      this.$http.post('/productType/findAllName').then((rep)=>{\r\n        if(rep.data.code===200){\r\n          this.productTypeInfo=rep.data.data;\r\n        }\r\n      }).catch((err)=>{this.$msg.error(err)})\r\n      this.getDateNow();\r\n    }\r\n  }\r\n</script>\r\n\r\n<style>\r\n  .product-add{\r\n    margin: 0;\r\n    padding: 0;\r\n    min-height: 100%;\r\n    user-select: none;\r\n    min-width: 1226px;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n  }\r\n\r\n  .product-add .product-box{\r\n    height: 700px;\r\n    width: 90%;\r\n  }\r\n\r\n  .product-add .info-box{\r\n    height: 600px;\r\n    border:1px solid #EBEEF5;\r\n  }\r\n\r\n  .product-add .product-form {\r\n    width: 700px;\r\n    height: 560px;\r\n    margin: 25px auto 0;\r\n    text-align: left;\r\n    position: relative;\r\n  }\r\n\r\n  .product-add .product-form .el-form-item{\r\n    margin-bottom: 15px;\r\n  }\r\n  .product-add .product-upload .el-upload-dragger{\r\n    height: 140px;\r\n    width: 160px;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n  }\r\n\r\n  .product-add .product-desc .el-textarea__inner{\r\n    max-height: 160px;\r\n    height: 145px!important;\r\n  }\r\n  .product-add .avatar-uploader-icon {\r\n    font-size: 28px;\r\n    color: #8c939d;\r\n    width: 178px;\r\n    height: 178px;\r\n    line-height: 178px;\r\n    text-align: center;\r\n  }\r\n\r\n  .product-add .product-form .el-form-item__label{\r\n    width: 94px;\r\n  }\r\n  .product-add .product-form .select-spec .el-select__tags{\r\n    overflow-y: scroll;\r\n    max-height: 75px;\r\n  }\r\n  .product-add .product-form .select-spec .el-select__tags::-webkit-scrollbar{\r\n    width: 0;\r\n  }\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/product/ProductAdd.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"product-add\"},[_c('el-card',{staticClass:\"product-box\",attrs:{\"shadow\":\"hover\"}},[_c('div',{staticStyle:{\"text-align\":\"left\"},attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('i',{staticClass:\"el-icon-circle-plus-outline\"}),_vm._v(\" \"),_c('span',[_vm._v(\"添加商品\")])]),_vm._v(\" \"),_c('div',{staticClass:\"info-box\"},[_c('el-form',{ref:\"ruleForm\",staticClass:\"product-form\",attrs:{\"model\":_vm.productForm,\"inline\":true,\"rules\":_vm.productRules}},[_c('el-form-item',{staticStyle:{\"width\":\"100%\"},attrs:{\"label\":\"商品名称：\",\"prop\":\"productName\"}},[_c('el-input',{staticStyle:{\"width\":\"300px\"},attrs:{\"size\":\"small\"},model:{value:(_vm.productForm.productName),callback:function ($$v) {_vm.$set(_vm.productForm, \"productName\", $$v)},expression:\"productForm.productName\"}})],1),_vm._v(\" \"),_c('el-form-item',{staticStyle:{\"width\":\"45%\"},attrs:{\"label\":\"商品分类：\",\"prop\":\"productType\"}},[_c('el-select',{attrs:{\"size\":\"small\",\"filterable\":\"\",\"placeholder\":\"请选择类别\"},on:{\"change\":function($event){return _vm.querySpec(_vm.productForm.productType)}},model:{value:(_vm.productForm.productType),callback:function ($$v) {_vm.$set(_vm.productForm, \"productType\", $$v)},expression:\"productForm.productType\"}},_vm._l((_vm.productTypeInfo),function(item,index){return _c('el-option',{key:index,attrs:{\"label\":item,\"value\":item}})}),1)],1),_vm._v(\" \"),_c('el-form-item',{staticStyle:{\"width\":\"50%\"},attrs:{\"label\":\"商品规格：\",\"prop\":\"productSpec\"}},[_c('el-select',{staticClass:\"select-spec\",staticStyle:{\"width\":\"245px\"},attrs:{\"size\":\"small\",\"multiple\":\"\",\"placeholder\":\"请选择商品规格\"},model:{value:(_vm.productSpec),callback:function ($$v) {_vm.productSpec=$$v},expression:\"productSpec\"}},_vm._l((_vm.productSpecs),function(item){return _c('el-option',{key:item.specsId,attrs:{\"label\":item.specsName,\"value\":item.specsId}})}),1)],1),_vm._v(\" \"),_c('el-form-item',{staticStyle:{\"width\":\"100%\"},attrs:{\"label\":\"商品品牌：\",\"prop\":\"productBrand\"}},[_c('el-select',{attrs:{\"size\":\"small\",\"filterable\":\"\",\"placeholder\":\"请选择品牌\"},model:{value:(_vm.productForm.productBrand),callback:function ($$v) {_vm.$set(_vm.productForm, \"productBrand\", $$v)},expression:\"productForm.productBrand\"}},_vm._l((_vm.productBrandInfo),function(item,index){return _c('el-option',{key:index,attrs:{\"label\":item,\"value\":item}})}),1)],1),_vm._v(\" \"),_c('el-form-item',{staticStyle:{\"width\":\"45%\"},attrs:{\"label\":\"商品进价：\",\"prop\":\"inPrice\"}},[_c('el-input',{attrs:{\"min\":\"0\",\"size\":\"small\",\"type\":\"number\",\"placeholder\":\"商品进价\"},model:{value:(_vm.productForm.inPrice),callback:function ($$v) {_vm.$set(_vm.productForm, \"inPrice\", $$v)},expression:\"productForm.inPrice\"}})],1),_vm._v(\" \"),_c('el-form-item',{staticStyle:{\"width\":\"45%\"},attrs:{\"label\":\"商品库存：\",\"prop\":\"productStock\"}},[_c('el-input-number',{attrs:{\"size\":\"small\",\"min\":0,\"max\":1000,\"placeholder\":\"商品库存\"},model:{value:(_vm.productForm.productStock),callback:function ($$v) {_vm.$set(_vm.productForm, \"productStock\", $$v)},expression:\"productForm.productStock\"}})],1),_vm._v(\" \"),_c('el-form-item',{staticStyle:{\"width\":\"45%\"},attrs:{\"label\":\"商品售价：\",\"prop\":\"outPrice\"}},[_c('el-input',{attrs:{\"min\":\"0\",\"size\":\"small\",\"type\":\"number\",\"placeholder\":\"商品售价\"},model:{value:(_vm.productForm.outPrice),callback:function ($$v) {_vm.$set(_vm.productForm, \"outPrice\", $$v)},expression:\"productForm.outPrice\"}})],1),_vm._v(\" \"),_c('el-form-item',{staticStyle:{\"width\":\"45%\"},attrs:{\"label\":\"最低库存：\",\"prop\":\"lowestStock\"}},[_c('el-input-number',{attrs:{\"size\":\"small\",\"min\":0,\"max\":1000,\"placeholder\":\"最低库存\"},model:{value:(_vm.productForm.lowestStock),callback:function ($$v) {_vm.$set(_vm.productForm, \"lowestStock\", $$v)},expression:\"productForm.lowestStock\"}})],1),_vm._v(\" \"),_c('el-form-item',{staticStyle:{\"width\":\"100%\",\"height\":\"30px\"},attrs:{\"label\":\"商品状态：\"}},[_c('el-form-item',{staticStyle:{\"margin-right\":\"50px\"},attrs:{\"label\":\"上架\",\"prop\":\"isSale\"}},[_c('el-switch',{model:{value:(_vm.productForm.isSale),callback:function ($$v) {_vm.$set(_vm.productForm, \"isSale\", $$v)},expression:\"productForm.isSale\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"新品\",\"prop\":\"isNew\"}},[_c('el-switch',{model:{value:(_vm.productForm.isNew),callback:function ($$v) {_vm.$set(_vm.productForm, \"isNew\", $$v)},expression:\"productForm.isNew\"}})],1)],1),_vm._v(\" \"),_c('el-form-item',{staticStyle:{\"width\":\"45%\"},attrs:{\"label\":\"商品介绍：\",\"prop\":\"productDescribe\"}},[_c('el-input',{staticClass:\"product-desc\",attrs:{\"type\":\"textarea\",\"size\":\"small\",\"show-word-limit\":\"\",\"autosize\":{ minRows: 1, maxRows: 4},\"placeholder\":\"商品描述\"},model:{value:(_vm.productForm.productDescribe),callback:function ($$v) {_vm.$set(_vm.productForm, \"productDescribe\", $$v)},expression:\"productForm.productDescribe\"}})],1),_vm._v(\" \"),_c('el-form-item',{staticStyle:{\"width\":\"45%\"},attrs:{\"label\":\"商品图片：\",\"prop\":\"productUrl\"}},[_c('el-upload',{ref:\"productUpload\",staticClass:\"product-upload\",staticStyle:{\"display\":\"flex\",\"justify-content\":\"center\",\"align-items\":\"center\",\"height\":\"140px\",\"width\":\"160px\"},attrs:{\"action\":this.$VAR.http+'/uploadImage?name=productImage',\"on-success\":_vm.uploadProductUrlSuccess,\"before-upload\":_vm.beforeAvatarUpload,\"drag\":true,\"list-type\":\"picture\"}},[(_vm.productForm.productUrl)?_c('el-image',{staticStyle:{\"height\":\"140px\",\"width\":\"160px\"},attrs:{\"src\":_vm.productForm.productUrl}}):_c('i',{staticClass:\"el-icon-plus avatar-uploader-icon\"})],1)],1),_vm._v(\" \"),_c('el-form-item',{staticStyle:{\"width\":\"100%\",\"text-align\":\"center\",\"position\":\"absolute\",\"bottom\":\"-14px\",\"left\":\"0\"}},[_c('el-button',{staticStyle:{\"margin\":\"0 55px\"},attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.submitForm('ruleForm')}}},[_vm._v(\"添加商品\")]),_vm._v(\" \"),_c('el-button',{staticStyle:{\"margin\":\"0 55px\"},on:{\"click\":function($event){return _vm.resetForm('ruleForm')}}},[_vm._v(\"取消重置\")])],1)],1)],1)])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-e3507d3c\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/product/ProductAdd.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-e3507d3c\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./ProductAdd.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./ProductAdd.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./ProductAdd.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-e3507d3c\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./ProductAdd.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/product/ProductAdd.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}