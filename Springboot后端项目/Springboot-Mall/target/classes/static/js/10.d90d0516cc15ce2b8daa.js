webpackJsonp([10],{AfxO:function(e,t){},g7y8:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o("mvHQ"),a=o.n(r),s={name:"Login_Form",data:function(){return{loadForm:{username:"",pass:""},rules:{username:[{validator:function(e,t,o){if(!t)return o(new Error("请输入账号！"));o()},trigger:"blur"}],pass:[{validator:function(e,t,o){""===t?o(new Error("请输入密码")):o()},trigger:"blur"}]}}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=t.$loading({lock:!0,text:"登录中",background:"rgba(255,255,255,0.1)"});t.$http.post("/login?username="+t.loadForm.username+"&password="+t.loadForm.pass).then(function(e){if(o.close(),200===e.data.code){var r=e.data.data.sessionId,s=e.data.data.role,n=e.data.data.user,l=e.data.data.roleInfo,i=void 0;t.$http.post("/vip/existsVip?accountNumber="+n.accountNumber).then(function(e){if(200===e.data.code){i=e.data.data,n.isVip=i,t.$store.commit("setToken",r),t.$store.commit("setRole",s),t.$store.commit("setUser",n),t.$store.commit("setRoleInfo",l),localStorage.setItem("store",a()(t.$store.state));var o=(new Date).getHours(),u=void 0;o>7&&o<12?u="上午好!":o>=12&&o<=13?u="中午好!":o>13&&o<=18?u="下午好!":o>18&&o<22&&(u="晚上好!");var m="欢迎登录花卷商城";-1===s.indexOf(t.$VAR.ordinaryRole)&&(m+="后台系统"),t.$notify({title:u,message:m,type:"success",offset:0}),-1!==s.indexOf(t.$VAR.ordinaryRole)?t.$router.push("/MallHome"):t.$router.push("/HomePage")}}).catch(function(e){t.$msg.error(e)})}else t.$msg.error({message:e.data.message,showClose:!0,duration:1500})}).catch(function(e){console.log(e),o.close(),t.$msg.error({message:"登录失败，"+e,showClose:!0,duration:1500})})})}}},n={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"login"},[o("el-form",{ref:"loadForm",staticClass:"demo-loginForm",attrs:{model:e.loadForm,rules:e.rules}},[o("el-form-item",{attrs:{prop:"username"}},[o("el-input",{staticClass:"el-input",attrs:{name:"account","auto-complete":"on",autocomplete:"on",placeholder:"请输入账号"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submitForm("loadForm")}},model:{value:e.loadForm.username,callback:function(t){e.$set(e.loadForm,"username",t)},expression:"loadForm.username"}},[o("i",{staticClass:"el-input__icon el-icon-mobile-phone",attrs:{slot:"prefix"},slot:"prefix"})])],1),e._v(" "),o("el-form-item",{staticStyle:{"margin-bottom":"35px"},attrs:{prop:"pass"}},[o("el-input",{staticClass:"el-input",attrs:{type:"password",placeholder:"请输入密码"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submitForm("loadForm")}},model:{value:e.loadForm.pass,callback:function(t){e.$set(e.loadForm,"pass",t)},expression:"loadForm.pass"}},[o("i",{staticClass:"el-input__icon el-icon-lock",attrs:{slot:"prefix"},slot:"prefix"})])],1),e._v(" "),o("router-link",{attrs:{to:"/resetPwdForm"}},[o("a",{staticClass:"resetPwd"},[e._v("找回密码")])]),e._v(" "),o("router-link",{attrs:{to:"/registerForm"}},[o("a",{staticClass:"login-a"},[e._v("注册账户")])]),e._v(" "),o("el-form-item",[o("el-button",{staticClass:"el-form-button",attrs:{type:"primary",plain:""},on:{click:function(t){return e.submitForm("loadForm")}}},[e._v("登录")])],1)],1)],1)},staticRenderFns:[]};var l=o("VU/8")(s,n,!1,function(e){o("AfxO")},null,null);t.default=l.exports}});
//# sourceMappingURL=10.d90d0516cc15ce2b8daa.js.map