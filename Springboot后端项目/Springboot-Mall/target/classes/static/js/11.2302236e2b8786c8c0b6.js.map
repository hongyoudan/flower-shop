{"version":3,"sources":["webpack:///src/components/user/UserList.vue","webpack:///./src/components/user/UserList.vue?f9e6","webpack:///./src/components/user/UserList.vue"],"names":["UserList","name","data","userInfo","VAR","this","$VAR","operateRole","$store","state","role","operateId","user","userId","userInfoResource","userDialogVisible","roleInfo","handleIndex","currentRole","currentRoleName","allotRoles","userInfoForm","key","methods","queryUser","length","i","len","userName","indexOf","push","accountNumber","resetForm","formName","$refs","resetFields","isUserState","index","_this","loading","$loading","lock","text","background","$http","post","userState","then","rep","close","code","$notify","title","message","type","catch","err","$msg","error","allotRole","_this2","userRole","roleName","roleId","_i","deleteUser","rows","_this3","$confirm","confirmButtonText","cancelButtonText","splice","reqInfo","_this4","ordinaryRole","adminRole","submitRole","_this5","$alert","_i2","j","substring","console","log","created","user_UserList","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","shadow","staticStyle","text-align","slot","_v","right","on","click","$event","ref","model","inline","label","prop","clearable","placeholder","nativeOn","keyup","_k","keyCode","value","callback","$$v","$set","expression","position","width","height","border","scopedSlots","_u","fn","scope","disabled","row","change","$index","align","min-width","margin","size","content","placement","effect","visible","distinguishCancelAndClose","update:visible","margin-top","_s","_e","multiple","_l","item","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/11.2302236e2b8786c8c0b6.js","sourcesContent":["<template>\n  <div class=\"user-list\">\n    <el-card class=\"user-hd\" shadow=\"never\">\n      <div slot=\"header\" style=\"text-align: left;\">\n        <i class=\"el-icon-search\"/>\n        <span>筛选搜索</span>\n        <el-button class=\"el-button-search\" style=\"right: 111px\" type=\"primary\" @click=\"queryUser()\">查询</el-button>\n        <el-button class=\"el-button-search\" style=\"right: 20px\" @click=\"resetForm('userInfoForm')\">重置</el-button>\n      </div>\n      <el-form :model=\"userInfoForm\" ref=\"userInfoForm\" inline class=\"query-form\">\n        <el-form-item label=\"输入搜索：\" prop=\"key\">\n          <el-input v-model=\"userInfoForm.key\" @keyup.enter.native=\"queryUser()\" clearable placeholder=\"帐号/姓名\"></el-input>\n        </el-form-item>\n      </el-form>\n    </el-card>\n    <el-card class=\"user-box\" shadow=\"never\">\n      <div slot=\"header\" style=\"text-align: left;position: relative\">\n        <i class=\"el-icon-coin\"/>\n        <span>数据列表</span>\n      </div>\n      <el-table :data=\"userInfo\" class=\"type-table\" height=\"425\"  border style=\"width: 100%\">\n        <el-table-column prop=\"userId\" label=\"编号\" width=\"100\"></el-table-column>\n        <el-table-column prop=\"accountNumber\" label=\"帐号\" width=\"200\"></el-table-column>\n        <el-table-column prop=\"userName\" label=\"姓名\" width=\"150\"></el-table-column>\n        <el-table-column prop=\"telephone\" label=\"手机号\" width=\"200\"></el-table-column>\n        <el-table-column prop=\"creatTime\" label=\"注册时间\" width=\"200\"></el-table-column>\n        <el-table-column prop=\"loginTime\" label=\"最后登录\" width=\"200\"></el-table-column>\n        <el-table-column label=\"是否启用\" width=\"100\">\n          <template slot-scope=\"scope\">\n            <el-switch :disabled=\"operateId===scope.row.userId||scope.row.userName===VAR.adminRole\"\n              @change=\"isUserState(scope.$index)\" v-model=\"userInfo[scope.$index].userState\"/>\n          </template>\n        </el-table-column>\n        <el-table-column label=\"操作\" align=\"center\" min-width=\"200\">\n          <template slot-scope=\"scope\">\n            <el-button size=\"mini\" style=\"margin: 0 2%\" @click=\"allotRole(scope.$index)\">分配角色</el-button>\n            <el-tooltip :disabled=\"operateRole!==null && operateRole.indexOf(VAR.adminRole)!==-1\" content=\"超级管理员才有删除权限\" placement=\"bottom\" effect=\"light\">\n              <span>\n                <el-button size=\"mini\" type=\"danger\"  :disabled=\"((operateId===scope.row.userId) || (operateRole!==null && operateRole.indexOf(VAR.adminRole)===-1))\"\n                           style=\"margin: 0 2%\" @click=\"deleteUser(scope.$index, userInfo)\">删除</el-button>\n              </span>\n            </el-tooltip>\n          </template>\n        </el-table-column>\n      </el-table>\n    </el-card>\n    <el-dialog title=\"分配角色\" class=\"user-dialog\"  :visible.sync=\"userDialogVisible\" width=\"30%\" distinguishCancelAndClose >\n      <div style=\"text-align: left;width: 80%;margin: 0 auto\">\n        <h3 style=\"margin-top: 0\" v-if=\"userInfo.length!==0\">姓名:\n          <el-tooltip effect=\"dark\" :content=\"currentRoleName\" placement=\"right\">\n           <el-tag v-if=\"currentRoleName.indexOf(VAR.adminRole)!==-1\" type=\"warning\">{{userInfo[handleIndex]['userName']}}</el-tag>\n           <el-tag v-else-if=\"currentRoleName.indexOf(VAR.ordinaryRole)!==-1\" type=\"success\">{{userInfo[handleIndex]['userName']}}</el-tag>\n           <el-tag v-else-if=\"currentRoleName.indexOf('暂无角色信息')!==-1\" type=\"info\">{{userInfo[handleIndex]['userName']}}</el-tag>\n           <el-tag v-else type=\"danger\">{{userInfo[handleIndex]['userName']}}</el-tag>\n          </el-tooltip>\n        </h3>\n        <el-select v-model=\"allotRoles\" multiple placeholder=\"请选择角色\" style=\"width: 100%;\">\n          <el-option v-for=\"item in roleInfo\"  :key=\"item.roleId\" :label=\"item.roleName\" :value=\"item.roleId\"></el-option>\n        </el-select>\n      </div>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button size=\"small\" @click=\"userDialogVisible = false\">取 消</el-button>\n        <el-button size=\"small\" type=\"primary\" @click=\"submitRole\">确 定</el-button>\n      </span>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\n  export default {\n    name: \"UserList\",\n    data: function () {\n      return {\n        userInfo: [],\n        VAR : this.$VAR,\n        operateRole: this.$store.state.role,\n        operateId: this.$store.state.user.userId,\n        userInfoResource: [],\n        userDialogVisible: false,\n        roleInfo: [],\n        handleIndex: 0,\n        currentRole: [],\n        currentRoleName: '',\n        allotRoles: [],  //被分配的角色\n        userInfoForm: {\n          key: ''\n        }\n      }\n    },\n    methods:{\n      queryUser(){\n        if(this.userInfoForm.key.length!==0){\n          this.userInfo=[];\n          for(let i=0,len=this.userInfoResource.length;i<len;i++){\n            if(this.userInfoResource[i].userName.indexOf(this.userInfoForm.key)!==-1){\n              this.userInfo.push(this.userInfoResource[i]);\n            }else if(this.userInfoResource[i].accountNumber.indexOf(this.userInfoForm.key)!==-1){\n              this.userInfo.push(this.userInfoResource[i]);\n            }\n          }\n        }else{\n          this.userInfo = this.userInfoResource;\n        }\n      },\n      resetForm(formName) {\n        this.$refs[formName].resetFields();\n      },\n      isUserState(index){\n        let loading = this.$loading({lock: true, text: \"数据提交中\",background:\"rgba(255,255,255,0.1)\"});\n        this.$http.post('/allow/update?userId=' + this.userInfo[index].userId + '&userState=' + this.userInfo[index].userState).then((rep) => {\n          loading.close();\n          if (rep.data.code === 200) {\n            if (this.userInfo[index].userState) {\n              this.$notify({title: '成功', message: this.userInfo[index].userName+'\\t已启用', type: 'success'});\n            } else {\n              this.$notify({title: '成功', message: this.userInfo[index].userName+'\\t已禁用', type: 'success'});\n            }\n          }\n        }).catch((err) => {\n          loading.close();\n          this.$msg.error(err)\n        })\n      },\n      allotRole: function (index) {\n        this.handleIndex = index;\n        let userId = this.userInfo[index].userId;\n        this.$http.post('/userRole/findRoleById?userId=' + userId).then((rep) => {\n          if (rep.data.code === 200) {\n            let userRole = rep.data.data;\n            this.currentRole = rep.data.data;\n            this.currentRoleName = ''; //数组清空\n            for (let i = 0; i < this.currentRole.length; i++) {\n              this.currentRoleName += this.currentRole[i].roleName + '\\t';\n            }\n            if (this.currentRoleName.length === 0) {\n              this.currentRoleName = '暂无角色信息'\n            }\n            let roleId = [];\n            for (let i=0;i<userRole.length;i++) {\n              if (userRole[i].roleId !== 5 && userRole[i].roleId !== 1) {\n                roleId.push(userRole[i].roleId)\n              }\n            }\n            this.allotRoles = roleId;\n          }\n        }).catch((err) => {\n          this.$msg.error(err);\n        })\n        this.userDialogVisible = true;\n      },\n      deleteUser(index, rows){\n        this.$confirm('此操作将永久删除该用户信息, 是否继续?', '提示', {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          type: 'warning'\n        }).then(() => {\n          let loading = this.$loading({lock: true, text: \"数据提交中\",background:\"rgba(255,255,255,0.1)\"});\n          this.$http.post('/user/delete?userId='+this.userInfo[index].userId).then((rep)=>{\n            loading.close();\n            if(rep.data.code === 200){\n              this.$notify({title: '成功', message: '用户（' + this.userInfo[index].userName+'）\\t删除成功', type: 'success'});\n              rows.splice(index, 1);//删掉该行\n            }else{\n              this.$notify({title: '错误', message: rep.data.message, type: 'error'});\n            }\n          }).catch((err)=>{\n            loading.close();\n            this.$msg.error(err);\n          })\n        }).catch(() => {\n          this.$notify({title: '操作取消', message: '', type: 'success'});\n        });\n\n      },\n      reqInfo(){\n        this.$http.post('/user/findAll').then((rep)=>{\n          if(rep.data.code===200){\n            this.userInfo=this.userInfoResource=rep.data.data;\n          }\n        }).catch((err)=>{this.$msg.error(err)})\n        this.$http.post('/role/findAllUsable').then((rep)=>{\n          if(rep.data.code===200){\n            this.roleInfo = rep.data.data;\n            for (let i =0;i<this.roleInfo.length;i++) {\n              if(this.roleInfo[i].roleName === this.$VAR.ordinaryRole || this.roleInfo[i].roleName===this.$VAR.adminRole){\n                this.roleInfo.splice(i,1);\n              }\n            }\n          }\n        }).catch((err)=>{this.$msg.error(err)})\n      },\n      submitRole(){\n        if(this.allotRoles.length===0){\n          this.$alert('至少选择一个角色', '提示', {\n            confirmButtonText: '确定',\n            type:\"warning\"\n          });\n        }else{\n          this.$confirm('是否要分配该角色?', '提示', {\n            confirmButtonText: '确定',\n            cancelButtonText: '取消',\n            type: 'warning'\n          }).then(() => {\n            let roleInfo='';\n            for (let i = 0; i < this.currentRole.length; i++) {\n              if(this.currentRole[i].roleName.indexOf(this.$VAR.adminRole)!==-1){\n                this.allotRoles.push(this.currentRole[i].roleId);\n                roleInfo+=this.currentRole[i].roleName+'、 ';\n              }\n            }\n\n            for (let i = 0; i < this.allotRoles.length; i++) {\n              for (let j = 0; j < this.roleInfo.length; j++) {\n                if(this.allotRoles[i] === this.roleInfo[j].roleId){\n                  roleInfo+=this.roleInfo[j].roleName+'、 ';\n                }\n              }\n            }\n            roleInfo = roleInfo.substring(0,roleInfo.length-2);\n            console.log(roleInfo)\n            let loading = this.$loading({lock: true, text: \"数据提交中\",background:\"rgba(255,255,255,0.1)\"});\n            this.$http.post('/user/author?userId='+this.userInfo[this.handleIndex].userId+'&roleId='+this.allotRoles).then((rep)=>{\n              loading.close();\n              if(rep.data.code===200){\n                this.$http.post('/allow/sendHtmlRole?sendTo='+this.userInfo[this.handleIndex].accountNumber+\n                  '&userName='+this.userInfo[this.handleIndex].userName+'&roleInfo='+roleInfo);\n                this.userDialogVisible = false;\n                this.$notify({title: '成功', message: '\\t角色授权成功', type: 'success'});\n              }else{\n                this.$notify({title: '错误', message: rep.data.message, type: 'error'});\n              }\n            }).catch((err)=>{\n              loading.close();\n              this.$msg.error(err)\n            })\n          }).catch(() => {});\n        }\n      }\n    },\n    created() {\n      this.reqInfo();\n    }\n  }\n</script>\n\n<style>\n  .user-list{\n    margin: 0;\n    padding: 0;\n    min-height: 94%;\n    user-select: none;\n    min-width: 1226px;\n  }\n  .user-list .user-hd{\n    height: 138px;\n    margin: 30px auto 10px;\n    width: 95%;\n  }\n\n  .user-list .user-hd .el-card__header{\n    position: relative;\n  }\n\n\n  .user-list .info-box{\n    height: 600px;\n    border:1px solid #EBEEF5;\n  }\n\n  .user-list .el-card__body{\n    user-select: text;\n  }\n\n  .user-list .user-hd .el-button-search{\n    position: absolute;\n    top: 14px;\n    padding: 3px 0;\n    width: 70px;\n    height: 30px;\n  }\n\n  .user-list .query-form{\n    text-align: left;\n  }\n\n  .user-list .user-box{\n    height: 530px;\n    margin: 20px auto 10px;\n    width: 95%;\n  }\n\n  .user-list .user-box th,.user-list .user-box td{\n    text-align: center;\n  }\n\n  .user-list .el-table th.gutter{\n    display: table-cell!important;\n  }\n\n  .user-list .info-form{\n    position: relative;\n  }\n\n  .user-list .user-dialog{\n    min-width: 200px;\n\n  }\n\n  .user-list .user-dialog .el-dialog__header{\n    text-align: left;\n  }\n\n  .user-list .user-dialog .el-dialog{\n    margin-top: 28vh!important;\n  }\n  .user-list .user-dialog .el-tag{\n    height: 28px;\n    line-height: 28px;\n    font-weight: 200;\n    padding: 0 4px;\n    cursor: pointer;\n  }\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/user/UserList.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"user-list\"},[_c('el-card',{staticClass:\"user-hd\",attrs:{\"shadow\":\"never\"}},[_c('div',{staticStyle:{\"text-align\":\"left\"},attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('i',{staticClass:\"el-icon-search\"}),_vm._v(\" \"),_c('span',[_vm._v(\"筛选搜索\")]),_vm._v(\" \"),_c('el-button',{staticClass:\"el-button-search\",staticStyle:{\"right\":\"111px\"},attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.queryUser()}}},[_vm._v(\"查询\")]),_vm._v(\" \"),_c('el-button',{staticClass:\"el-button-search\",staticStyle:{\"right\":\"20px\"},on:{\"click\":function($event){return _vm.resetForm('userInfoForm')}}},[_vm._v(\"重置\")])],1),_vm._v(\" \"),_c('el-form',{ref:\"userInfoForm\",staticClass:\"query-form\",attrs:{\"model\":_vm.userInfoForm,\"inline\":\"\"}},[_c('el-form-item',{attrs:{\"label\":\"输入搜索：\",\"prop\":\"key\"}},[_c('el-input',{attrs:{\"clearable\":\"\",\"placeholder\":\"帐号/姓名\"},nativeOn:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.queryUser()}},model:{value:(_vm.userInfoForm.key),callback:function ($$v) {_vm.$set(_vm.userInfoForm, \"key\", $$v)},expression:\"userInfoForm.key\"}})],1)],1)],1),_vm._v(\" \"),_c('el-card',{staticClass:\"user-box\",attrs:{\"shadow\":\"never\"}},[_c('div',{staticStyle:{\"text-align\":\"left\",\"position\":\"relative\"},attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('i',{staticClass:\"el-icon-coin\"}),_vm._v(\" \"),_c('span',[_vm._v(\"数据列表\")])]),_vm._v(\" \"),_c('el-table',{staticClass:\"type-table\",staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.userInfo,\"height\":\"425\",\"border\":\"\"}},[_c('el-table-column',{attrs:{\"prop\":\"userId\",\"label\":\"编号\",\"width\":\"100\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"accountNumber\",\"label\":\"帐号\",\"width\":\"200\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"userName\",\"label\":\"姓名\",\"width\":\"150\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"telephone\",\"label\":\"手机号\",\"width\":\"200\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"creatTime\",\"label\":\"注册时间\",\"width\":\"200\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"loginTime\",\"label\":\"最后登录\",\"width\":\"200\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"是否启用\",\"width\":\"100\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-switch',{attrs:{\"disabled\":_vm.operateId===scope.row.userId||scope.row.userName===_vm.VAR.adminRole},on:{\"change\":function($event){return _vm.isUserState(scope.$index)}},model:{value:(_vm.userInfo[scope.$index].userState),callback:function ($$v) {_vm.$set(_vm.userInfo[scope.$index], \"userState\", $$v)},expression:\"userInfo[scope.$index].userState\"}})]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"操作\",\"align\":\"center\",\"min-width\":\"200\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{staticStyle:{\"margin\":\"0 2%\"},attrs:{\"size\":\"mini\"},on:{\"click\":function($event){return _vm.allotRole(scope.$index)}}},[_vm._v(\"分配角色\")]),_vm._v(\" \"),_c('el-tooltip',{attrs:{\"disabled\":_vm.operateRole!==null && _vm.operateRole.indexOf(_vm.VAR.adminRole)!==-1,\"content\":\"超级管理员才有删除权限\",\"placement\":\"bottom\",\"effect\":\"light\"}},[_c('span',[_c('el-button',{staticStyle:{\"margin\":\"0 2%\"},attrs:{\"size\":\"mini\",\"type\":\"danger\",\"disabled\":((_vm.operateId===scope.row.userId) || (_vm.operateRole!==null && _vm.operateRole.indexOf(_vm.VAR.adminRole)===-1))},on:{\"click\":function($event){return _vm.deleteUser(scope.$index, _vm.userInfo)}}},[_vm._v(\"删除\")])],1)])]}}])})],1)],1),_vm._v(\" \"),_c('el-dialog',{staticClass:\"user-dialog\",attrs:{\"title\":\"分配角色\",\"visible\":_vm.userDialogVisible,\"width\":\"30%\",\"distinguishCancelAndClose\":\"\"},on:{\"update:visible\":function($event){_vm.userDialogVisible=$event}}},[_c('div',{staticStyle:{\"text-align\":\"left\",\"width\":\"80%\",\"margin\":\"0 auto\"}},[(_vm.userInfo.length!==0)?_c('h3',{staticStyle:{\"margin-top\":\"0\"}},[_vm._v(\"姓名:\\n        \"),_c('el-tooltip',{attrs:{\"effect\":\"dark\",\"content\":_vm.currentRoleName,\"placement\":\"right\"}},[(_vm.currentRoleName.indexOf(_vm.VAR.adminRole)!==-1)?_c('el-tag',{attrs:{\"type\":\"warning\"}},[_vm._v(_vm._s(_vm.userInfo[_vm.handleIndex]['userName']))]):(_vm.currentRoleName.indexOf(_vm.VAR.ordinaryRole)!==-1)?_c('el-tag',{attrs:{\"type\":\"success\"}},[_vm._v(_vm._s(_vm.userInfo[_vm.handleIndex]['userName']))]):(_vm.currentRoleName.indexOf('暂无角色信息')!==-1)?_c('el-tag',{attrs:{\"type\":\"info\"}},[_vm._v(_vm._s(_vm.userInfo[_vm.handleIndex]['userName']))]):_c('el-tag',{attrs:{\"type\":\"danger\"}},[_vm._v(_vm._s(_vm.userInfo[_vm.handleIndex]['userName']))])],1)],1):_vm._e(),_vm._v(\" \"),_c('el-select',{staticStyle:{\"width\":\"100%\"},attrs:{\"multiple\":\"\",\"placeholder\":\"请选择角色\"},model:{value:(_vm.allotRoles),callback:function ($$v) {_vm.allotRoles=$$v},expression:\"allotRoles\"}},_vm._l((_vm.roleInfo),function(item){return _c('el-option',{key:item.roleId,attrs:{\"label\":item.roleName,\"value\":item.roleId}})}),1)],1),_vm._v(\" \"),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{attrs:{\"size\":\"small\"},on:{\"click\":function($event){_vm.userDialogVisible = false}}},[_vm._v(\"取 消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"},on:{\"click\":_vm.submitRole}},[_vm._v(\"确 定\")])],1)])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-84f7b5b6\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/user/UserList.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-84f7b5b6\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./UserList.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./UserList.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./UserList.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-84f7b5b6\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./UserList.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/user/UserList.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}