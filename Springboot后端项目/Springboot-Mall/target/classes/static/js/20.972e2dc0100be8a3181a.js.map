{"version":3,"sources":["webpack:///src/components/operate/Login_Form.vue","webpack:///./src/components/operate/Login_Form.vue?5fca","webpack:///./src/components/operate/Login_Form.vue"],"names":["Login_Form","name","data","loadForm","username","pass","rules","validator","rule","value","callback","Error","trigger","methods","submitForm","formName","_this","this","$refs","validate","valid","loading","$loading","lock","text","background","$http","post","then","res","close","code","token","sessionId","role","user","roleInfo","isVip","accountNumber","rep","$store","commit","localStorage","setItem","stringify_default","state","hours","Date","getHours","str","message","indexOf","$VAR","ordinaryRole","$notify","title","type","offset","$router","push","catch","err","$msg","error","showClose","duration","console","log","operate_Login_Form","render","_vm","_h","$createElement","_c","_self","staticClass","ref","attrs","model","prop","auto-complete","autocomplete","placeholder","nativeOn","keyup","$event","_k","keyCode","key","$$v","$set","expression","slot","_v","staticStyle","margin-bottom","to","plain","on","click","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"sJAwBAA,GACAC,KAAA,aACAC,KAAA,WAeA,OACAC,UACAC,SAAA,GACAC,KAAA,IAEAC,OACAF,WACAG,UArBA,SAAAC,EAAAC,EAAAC,GACA,IAAAD,EACA,OAAAC,EAAA,IAAAC,MAAA,WAEAD,KAiBAE,QAAA,SAEAP,OACAE,UAjBA,SAAAC,EAAAC,EAAAC,GACA,KAAAD,EACAC,EAAA,IAAAC,MAAA,UAEAD,KAaAE,QAAA,YAKAC,SACAC,WADA,SACAC,GAAA,IAAAC,EAAAC,KACAA,KAAAC,MAAAH,GAAAI,SAAA,SAAAC,GACA,IAAAA,EAqDA,SApDA,IAAAC,EAAAL,EAAAM,UAAAC,MAAA,EAAAC,KAAA,MAAAC,WAAA,0BACAT,EAAAU,MAAAC,KAAA,mBAAAX,EAAAb,SAAAC,SAAA,aAAAY,EAAAb,SAAAE,MAAAuB,KAAA,SAAAC,GAEA,GADAR,EAAAS,QACA,MAAAD,EAAA3B,KAAA6B,KAAA,CACA,IAAAC,EAAAH,EAAA3B,UAAA+B,UACAC,EAAAL,EAAA3B,UAAAgC,KACAC,EAAAN,EAAA3B,UAAAiC,KACAC,EAAAP,EAAA3B,UAAAkC,SACAC,OAAA,EACArB,EAAAU,MAAAC,KAAA,gCAAAQ,EAAAG,eAAAV,KAAA,SAAAW,GACA,SAAAA,EAAArC,KAAA6B,KAAA,CACAM,EAAAE,EAAArC,UACAiC,EAAA,MAAAE,EACArB,EAAAwB,OAAAC,OAAA,WAAAT,GACAhB,EAAAwB,OAAAC,OAAA,UAAAP,GACAlB,EAAAwB,OAAAC,OAAA,UAAAN,GACAnB,EAAAwB,OAAAC,OAAA,cAAAL,GACAM,aAAAC,QAAA,QAAAC,IAAA5B,EAAAwB,OAAAK,QACA,IAAAC,GAAA,IAAAC,MAAAC,WACAC,OAAA,EACAH,EAAA,GAAAA,EAAA,GACAG,EAAA,OACAH,GAAA,IAAAA,GAAA,GACAG,EAAA,OACAH,EAAA,IAAAA,GAAA,GACAG,EAAA,OACAH,EAAA,IAAAA,EAAA,KACAG,EAAA,QAEA,IAAAC,EAAA,YACA,IAAAhB,EAAAiB,QAAAnC,EAAAoC,KAAAC,gBACAH,GAAA,QAEAlC,EAAAsC,SAAAC,MAAAN,EAAAC,UAAAM,KAAA,UAAAC,OAAA,MACA,IAAAvB,EAAAiB,QAAAnC,EAAAoC,KAAAC,cACArC,EAAA0C,QAAAC,KAAA,aAEA3C,EAAA0C,QAAAC,KAAA,gBAGAC,MAAA,SAAAC,GACA7C,EAAA8C,KAAAC,MAAAF,UAGA7C,EAAA8C,KAAAC,OAAAb,QAAArB,EAAA3B,KAAAgD,QAAAc,WAAA,EAAAC,SAAA,SAEAL,MAAA,SAAAC,GACAK,QAAAC,IAAAN,GACAxC,EAAAS,QACAd,EAAA8C,KAAAC,OAAAb,QAAA,QAAAW,EAAAG,WAAA,EAAAC,SAAA,cC1GeG,GADEC,OAFjB,WAA0B,IAAAC,EAAArD,KAAasD,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,UAAoBF,EAAA,WAAgBG,IAAA,WAAAD,YAAA,iBAAAE,OAAmDC,MAAAR,EAAAnE,SAAAG,MAAAgE,EAAAhE,SAAwCmE,EAAA,gBAAqBI,OAAOE,KAAA,cAAmBN,EAAA,YAAiBE,YAAA,WAAAE,OAA8B5E,KAAA,UAAA+E,gBAAA,KAAAC,aAAA,KAAAC,YAAA,SAAgFC,UAAWC,MAAA,SAAAC,GAAyB,OAAAA,EAAA7B,KAAAL,QAAA,QAAAmB,EAAAgB,GAAAD,EAAAE,QAAA,WAAAF,EAAAG,IAAA,SAAsF,KAAelB,EAAAxD,WAAA,cAAmCgE,OAAQrE,MAAA6D,EAAAnE,SAAA,SAAAO,SAAA,SAAA+E,GAAuDnB,EAAAoB,KAAApB,EAAAnE,SAAA,WAAAsF,IAAwCE,WAAA,uBAAiClB,EAAA,KAAUE,YAAA,sCAAAE,OAAyDe,KAAA,UAAgBA,KAAA,cAAe,GAAAtB,EAAAuB,GAAA,KAAApB,EAAA,gBAAuCqB,aAAaC,gBAAA,QAAuBlB,OAAQE,KAAA,UAAeN,EAAA,YAAiBE,YAAA,WAAAE,OAA8BrB,KAAA,WAAA0B,YAAA,SAAwCC,UAAWC,MAAA,SAAAC,GAAyB,OAAAA,EAAA7B,KAAAL,QAAA,QAAAmB,EAAAgB,GAAAD,EAAAE,QAAA,WAAAF,EAAAG,IAAA,SAAsF,KAAelB,EAAAxD,WAAA,cAAmCgE,OAAQrE,MAAA6D,EAAAnE,SAAA,KAAAO,SAAA,SAAA+E,GAAmDnB,EAAAoB,KAAApB,EAAAnE,SAAA,OAAAsF,IAAoCE,WAAA,mBAA6BlB,EAAA,KAAUE,YAAA,8BAAAE,OAAiDe,KAAA,UAAgBA,KAAA,cAAe,GAAAtB,EAAAuB,GAAA,KAAApB,EAAA,eAAsCI,OAAOmB,GAAA,mBAAsBvB,EAAA,KAAUE,YAAA,aAAuBL,EAAAuB,GAAA,YAAAvB,EAAAuB,GAAA,KAAApB,EAAA,eAAmDI,OAAOmB,GAAA,mBAAsBvB,EAAA,KAAUE,YAAA,YAAsBL,EAAAuB,GAAA,YAAAvB,EAAAuB,GAAA,KAAApB,EAAA,gBAAAA,EAAA,aAAoEE,YAAA,iBAAAE,OAAoCrB,KAAA,UAAAyC,MAAA,IAA4BC,IAAKC,MAAA,SAAAd,GAAyB,OAAAf,EAAAxD,WAAA,gBAAoCwD,EAAAuB,GAAA,qBAEjvDO,oBCCjB,IAcAC,EAdyBC,EAAQ,OAcjCC,CACEvG,EACAoE,GATF,EAVA,SAAAoC,GACEF,EAAQ,SAaV,KAEA,MAUeG,EAAA,QAAAJ,EAAiB","file":"static/js/20.972e2dc0100be8a3181a.js","sourcesContent":["<!--登录表单组件-->\n<template>\n  <div class=\"login\">\n    <el-form class=\"demo-loginForm\" :model=\"loadForm\" :rules=\"rules\" ref=\"loadForm\">\n      <el-form-item prop=\"username\">\n        <el-input class=\"el-input\" v-model=\"loadForm.username\" @keyup.enter.native=\"submitForm('loadForm')\" name=\"account\" auto-complete=\"on\" autocomplete=\"on\"  placeholder=\"请输入账号\">\n          <i slot=\"prefix\" class=\"el-input__icon el-icon-mobile-phone\"></i>\n        </el-input>\n      </el-form-item>\n      <el-form-item prop=\"pass\" style=\"margin-bottom: 35px;\">\n        <el-input class=\"el-input\"  v-model=\"loadForm.pass\" @keyup.enter.native=\"submitForm('loadForm')\" type=\"password\" placeholder=\"请输入密码\">\n          <i slot=\"prefix\" class=\"el-input__icon el-icon-lock\"></i>\n        </el-input>\n      </el-form-item>\n      <router-link to=\"/resetPwdForm\"><a class=\"resetPwd\">找回密码</a></router-link>\n      <router-link to=\"/registerForm\"><a class=\"login-a\">注册账户</a></router-link>\n      <el-form-item>\n        <el-button class=\"el-form-button\" type=\"primary\" plain @click=\"submitForm('loadForm')\">登录</el-button>\n      </el-form-item>\n    </el-form>\n  </div>\n</template>\n\n<script>\n  export default {\n    name: \"Login_Form\",\n    data: function () {\n      let checkNumber = (rule, value, callback) => {\n        if (!value) {\n          return callback(new Error('请输入账号！'));\n        } else {\n          callback();\n        }\n      };\n      let validatePass = (rule, value, callback) => {\n        if (value === '') {\n          callback(new Error('请输入密码'));\n        } else {\n          callback();\n        }\n      };\n      return {\n        loadForm: {\n          username: '',\n          pass: ''\n        },\n        rules: {\n          username: [\n            {validator: checkNumber, trigger: 'blur'}\n          ],\n          pass: [\n            {validator: validatePass, trigger: 'blur'}\n          ]\n        }\n      };\n    },\n    methods: {\n      submitForm(formName) {\n        this.$refs[formName].validate((valid) => {\n          if (valid) {\n            let loading = this.$loading({lock: true, text: \"登录中\",background:\"rgba(255,255,255,0.1)\"});\n            this.$http.post(\"/login?username=\"+this.loadForm.username+\"&password=\"+this.loadForm.pass).then((res)=>{\n              loading.close();\n              if(res.data.code===200){\n                let token = res.data.data.sessionId;\n                let role = res.data.data.role;\n                let user = res.data.data.user;\n                let roleInfo = res.data.data.roleInfo;\n                let isVip;\n                this.$http.post('/vip/existsVip?accountNumber='+user.accountNumber).then((rep)=>{\n                  if(rep.data.code === 200){\n                    isVip = rep.data.data\n                    user['isVip']=isVip;\n                    this.$store.commit('setToken',token)\n                    this.$store.commit('setRole',role)\n                    this.$store.commit('setUser',user)\n                    this.$store.commit('setRoleInfo',roleInfo)\n                    localStorage.setItem(\"store\",JSON.stringify(this.$store.state))\n                    let hours = new Date().getHours();\n                    let str;\n                    if(hours>7 && hours<12){\n                      str = '上午好!'\n                    }else if(hours>=12 && hours<=13){\n                      str = '中午好!'\n                    }else if(hours>13 && hours<=18){\n                      str = '下午好!'\n                    }else if(hours>18 && hours<22){\n                      str = '晚上好!'\n                    }\n                    let message = '欢迎登录花卷商城';\n                    if(role.indexOf(this.$VAR.ordinaryRole)===-1){\n                      message +='后台系统'\n                    }\n                    this.$notify({title: str, message: message, type: 'success',offset: 50});\n                    if(role.indexOf(this.$VAR.ordinaryRole)!==-1){  // 不是-1  为普通用户，进入前端商城\n                      this.$router.push('/MallHome')\n                    }else{\n                      this.$router.push('/HomePage')\n                    }\n                  }\n                  }).catch((err)=>{\n                    this.$msg.error(err)\n                  })\n              }else{\n                this.$msg.error({message:res.data.message, showClose: true, duration:1500});\n              }\n            }).catch((err)=>{\n              console.log(err);\n              loading.close();\n              this.$msg.error({message:'登录失败，'+err, showClose: true, duration:1500});\n            })\n          } else {\n            return false;\n          }\n        });\n      }\n    }\n  }\n</script>\n\n<style>\n  .login{\n    width: 80%;\n    margin: auto;\n    height: 100%;\n  }\n\n  .login .demo-loginForm{\n    height: 50%;\n    padding-top: 15%;\n  }\n  .el-form-button{\n    display: block;\n    margin: auto;\n    width: 60%;\n  }\n  .login-a{\n    cursor: pointer;\n    position: absolute;\n    right: 35px;\n    top: 42%;\n    font-size: 13px;\n    color: rgb(147, 165, 255);\n  }\n  .login .resetPwd{\n    cursor: pointer;\n    position: absolute;\n    right: 35px;\n    top: 55%;\n    font-size: 13px;\n    color: rgb(147, 165, 255);\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/operate/Login_Form.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"login\"},[_c('el-form',{ref:\"loadForm\",staticClass:\"demo-loginForm\",attrs:{\"model\":_vm.loadForm,\"rules\":_vm.rules}},[_c('el-form-item',{attrs:{\"prop\":\"username\"}},[_c('el-input',{staticClass:\"el-input\",attrs:{\"name\":\"account\",\"auto-complete\":\"on\",\"autocomplete\":\"on\",\"placeholder\":\"请输入账号\"},nativeOn:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.submitForm('loadForm')}},model:{value:(_vm.loadForm.username),callback:function ($$v) {_vm.$set(_vm.loadForm, \"username\", $$v)},expression:\"loadForm.username\"}},[_c('i',{staticClass:\"el-input__icon el-icon-mobile-phone\",attrs:{\"slot\":\"prefix\"},slot:\"prefix\"})])],1),_vm._v(\" \"),_c('el-form-item',{staticStyle:{\"margin-bottom\":\"35px\"},attrs:{\"prop\":\"pass\"}},[_c('el-input',{staticClass:\"el-input\",attrs:{\"type\":\"password\",\"placeholder\":\"请输入密码\"},nativeOn:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.submitForm('loadForm')}},model:{value:(_vm.loadForm.pass),callback:function ($$v) {_vm.$set(_vm.loadForm, \"pass\", $$v)},expression:\"loadForm.pass\"}},[_c('i',{staticClass:\"el-input__icon el-icon-lock\",attrs:{\"slot\":\"prefix\"},slot:\"prefix\"})])],1),_vm._v(\" \"),_c('router-link',{attrs:{\"to\":\"/resetPwdForm\"}},[_c('a',{staticClass:\"resetPwd\"},[_vm._v(\"找回密码\")])]),_vm._v(\" \"),_c('router-link',{attrs:{\"to\":\"/registerForm\"}},[_c('a',{staticClass:\"login-a\"},[_vm._v(\"注册账户\")])]),_vm._v(\" \"),_c('el-form-item',[_c('el-button',{staticClass:\"el-form-button\",attrs:{\"type\":\"primary\",\"plain\":\"\"},on:{\"click\":function($event){return _vm.submitForm('loadForm')}}},[_vm._v(\"登录\")])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-54a5c488\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/operate/Login_Form.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-54a5c488\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Login_Form.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Login_Form.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Login_Form.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-54a5c488\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./Login_Form.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/operate/Login_Form.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}