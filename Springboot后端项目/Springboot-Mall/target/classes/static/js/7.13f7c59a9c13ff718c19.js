webpackJsonp([7],{DuFj:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"return-reason"},[n("el-card",{staticClass:"reason-hd",attrs:{shadow:"never"}},[n("div",{staticStyle:{"text-align":"left"},attrs:{slot:"header"},slot:"header"},[n("i",{staticClass:"el-icon-search"}),e._v(" "),n("span",[e._v("筛选搜索")]),e._v(" "),n("el-button",{staticClass:"el-button-search",staticStyle:{right:"111px"},attrs:{type:"primary"},on:{click:function(t){return e.queryReturnReason()}}},[e._v("查询")]),e._v(" "),n("el-button",{staticClass:"el-button-search",staticStyle:{right:"20px"},on:{click:function(t){return e.resetForm("returnReasonForm")}}},[e._v("重置")])],1),e._v(" "),n("el-form",{ref:"returnReasonForm",staticClass:"query-form",attrs:{model:e.returnReasonForm,inline:""}},[n("el-form-item",{attrs:{label:"输入搜索：",prop:"key"}},[n("el-input",{attrs:{clearable:"",placeholder:"退货原因"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.queryReturnReason(t)}},model:{value:e.returnReasonForm.key,callback:function(t){e.$set(e.returnReasonForm,"key",t)},expression:"returnReasonForm.key"}})],1)],1)],1),e._v(" "),n("el-card",{staticClass:"reason-box",attrs:{shadow:"never"}},[n("div",{staticStyle:{"text-align":"left",position:"relative"},attrs:{slot:"header"},slot:"header"},[n("i",{staticClass:"el-icon-coin"}),e._v(" "),n("span",[e._v("数据列表")]),e._v(" "),n("el-button",{staticClass:"el-button-add",on:{click:e.addReason}},[e._v("添加")])],1),e._v(" "),n("el-table",{staticClass:"type-table",staticStyle:{width:"100%"},attrs:{data:e.returnReason,height:"425",border:""}},[n("el-table-column",{attrs:{prop:"reasonId",label:"编号",width:"200"}}),e._v(" "),n("el-table-column",{attrs:{prop:"reasonName",label:"原因类型",width:"600"}}),e._v(" "),n("el-table-column",{attrs:{label:"是否启用",width:"350"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-switch",{on:{change:function(n){return e.isReasonState(t.$index)}},model:{value:e.returnReason[t.$index].status,callback:function(n){e.$set(e.returnReason[t.$index],"status",n)},expression:"returnReason[scope.$index].status"}})]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"操作",align:"center","min-width":"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{staticStyle:{margin:"0 4%"},attrs:{size:"mini"},on:{click:function(n){return e.openChange(t.$index)}}},[e._v("编辑")]),e._v(" "),n("el-button",{staticStyle:{margin:"0 4%"},attrs:{slot:"reference",size:"mini",type:"danger"},on:{click:function(n){return e.deleteReason(t.$index,e.returnReason)}},slot:"reference"},[e._v("删除")])]}}])})],1)],1),e._v(" "),n("el-dialog",{staticClass:"chang-reason",attrs:{title:"编辑退货原因","close-on-click-modal":!1,visible:e.dialogFormVisible,width:"420px",center:""},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[n("el-form",{ref:"changeFrom",staticClass:"info-form",attrs:{inline:"",rules:e.alterRules,model:e.alterForm}},[n("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"退货原因：",prop:"reasonName"}},[n("el-input",{attrs:{size:"small",placeholder:"退货原因"},model:{value:e.alterForm.reasonName,callback:function(t){e.$set(e.alterForm,"reasonName",t)},expression:"alterForm.reasonName"}})],1)],1),e._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{staticStyle:{padding:"12px 30px",margin:"0 30px"},attrs:{type:"primary"},on:{click:function(t){return e.submitChange("changeFrom")}}},[e._v("确 定")]),e._v(" "),n("el-button",{staticStyle:{padding:"12px 30px",margin:"0 30px"},on:{click:function(t){return e.cancelChange("changeFrom")}}},[e._v("取 消")])],1)],1)],1)},staticRenderFns:[]};var r=n("VU/8")({name:"ReturnReason",data:function(){return{returnReason:null,returnReasonResource:null,handleIndex:0,dialogFormVisible:!1,insert:!1,returnReasonForm:{key:""},alterForm:{reasonId:"",reasonName:"",status:""},alterRules:{reasonName:[{required:!0,message:"请输入退货原因",trigger:"blur"},{min:1,max:30,message:"退货原因长度不允许超过 30 个字符",trigger:"blur"}]}}},methods:{resetForm:function(e){this.$refs[e].resetFields()},queryReturnReason:function(){if(0!==this.returnReasonForm.key.length){this.returnReason=[];for(var e=0,t=this.returnReasonResource.length;e<t;e++)-1!==this.returnReasonResource[e].reasonName.indexOf(this.returnReasonForm.key)&&this.returnReason.push(this.returnReasonResource[e])}else this.returnReason=this.returnReasonResource},isReasonState:function(e){var t=this,n=this.$loading({lock:!0,text:"数据提交中",background:"rgba(255,255,255,0.1)"});this.$http.post("/returnReason/updateReason?reasonId="+this.returnReason[e].reasonId+"&status="+this.returnReason[e].status).then(function(a){n.close(),200===a.data.code&&(t.returnReason[e].status?t.$notify({title:"成功",message:t.returnReason[e].reasonName+"\t已启用",type:"success"}):t.$notify({title:"成功",message:t.returnReason[e].reasonName+"\t已禁用",type:"success"}))}).catch(function(e){n.close(),t.$msg.error(e)})},openChange:function(e){this.handleIndex=e,this.insert=!1,this.alterForm=this.returnReason[e],this.dialogFormVisible=!0},deleteReason:function(e,t){var n=this,a=this.returnReason[e].reasonName;this.$confirm("此操作将永久删除该退货原因, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var r=n.$loading({lock:!0,text:"数据提交中",background:"rgba(255,255,255,0.2)"});n.$http.post("/returnReason/deleteReason?reasonId="+n.returnReason[e].reasonId).then(function(s){r.close(),200===s.data.code?(t.splice(e,1),n.$notify({title:"成功",message:"退货原因（"+a+"）\t移除成功",type:"success"})):n.$notify({title:"错误",message:s.data.message,type:"error"})}).catch(function(e){r.close(),n.$msg.error(e)})}).catch(function(){n.$notify({title:"操作取消",message:"",type:"success"})})},addReason:function(){delete this.alterForm.reasonId,this.alterForm.reasonName="",this.alterForm.status=!0,this.insert=!0,this.dialogFormVisible=!0},submitChange:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.insert?t.$http.post("/returnReason/existReasonName?reasonId=0&reasonName="+t.alterForm.reasonName).then(function(e){if(200===e.data.code)if(e.data.data)t.$alert("退货原因("+t.alterForm.reasonName+")\t已存在，不能重复添加","警告",{confirmButtonText:"确定",type:"warning"});else{var n=t.$loading({lock:!0,text:"数据提交中",background:"rgba(255,255,255,0.2)"});t.$http.post("/returnReason/addReason",t.$qs.stringify(t.alterForm)).then(function(e){n.close(),200===e.data.code?(t.dialogFormVisible=!1,t.reqInfo(),t.$notify({title:"成功",message:"退货原因("+t.alterForm.reasonName+")\t添加成功",type:"success"})):t.$notify({title:"错误",message:e.data.message,type:"error"})}).catch(function(e){n.close(),t.$msg.error(e)})}}).catch(function(e){t.$msg.error(e)}):t.$http.post("/returnReason/existReasonName?reasonId="+t.returnReason[t.handleIndex].reasonId+"&reasonName="+t.alterForm.reasonName).then(function(e){if(200===e.data.code)if(e.data.data)t.$alert("退货原因("+t.alterForm.reasonName+")\t已存在，无法完成修改操作","警告",{confirmButtonText:"确定",type:"warning"});else{var n=t.$loading({lock:!0,text:"数据提交中",background:"rgba(255,255,255,0.2)"});t.$http.post("/returnReason/updateReason",t.$qs.stringify(t.alterForm)).then(function(e){n.close(),200===e.data.code?(t.dialogFormVisible=!1,t.returnReason[t.handleIndex]=t.alterForm,t.$notify({title:"成功",message:"退货原因("+t.alterForm.reasonName+")\t更新成功",type:"success"})):t.$notify({title:"错误",message:e.data.message,type:"error"})}).catch(function(e){n.close(),t.$msg.error(e)})}}).catch(function(e){t.$msg.error(e)})})},cancelChange:function(e){this.dialogFormVisible=!1,this.$refs[e].resetFields(),this.$notify({title:"操作取消",message:"",type:"success"})},reqInfo:function(){var e=this;this.$http.post("/returnReason/findAllReason").then(function(t){200===t.data.code&&(e.returnReasonResource=e.returnReason=t.data.data)}).catch(function(t){e.$msg.error(t)})}},created:function(){this.reqInfo()}},a,!1,function(e){n("xIzb")},null,null);t.default=r.exports},xIzb:function(e,t){}});
//# sourceMappingURL=7.13f7c59a9c13ff718c19.js.map