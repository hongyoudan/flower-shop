webpackJsonp([31],{GQvZ:function(e,t){!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"var";for(var n in void 0===window[t]&&(window[t]={}),e)e.hasOwnProperty(n)&&(window[t][n]=e[n])}({adminRole:"超级管理员",productRole:"商品管理员",orderRole:"订单管理员",userRole:"人事管理员",ordinaryRole:"顾客",http:"http://112.126.92.148:9999"},"VAR")},IcnI:function(e,t,n){"use strict";var o=n("7+uW"),r=n("NYxO");n("YaEn");o.default.use(r.a),t.a=new r.a.Store({state:{token:null,role:null,roleInfo:null,user:null,vipSerialNumber:null},mutations:{setToken:function(e,t){e.token=t},setRole:function(e,t){e.role=t},setRoleInfo:function(e,t){e.roleInfo=t},setUser:function(e,t){e.user=t},setVipSerialNumber:function(e,t){e.vipSerialNumber=t}},actions:{}})},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("7+uW"),r=n("mvHQ"),a=n.n(r),u=n("woOf"),i=n.n(u),l=n("YaEn"),s={name:"App",methods:{clearInfo:function(){this.$store.commit("setToken",null),this.$store.commit("setRole",null),this.$store.commit("setUser",null),this.$store.commit("setRoleInfo",null),localStorage.clear(),l.a.replace({path:"/loginForm"})},log:function(){setTimeout(function(){console.clear(),console.log("%c 花卷买卖  %c  您的帐号存在异常行为，已被封停（请联系工作人员）  ","font-size:12px;color:#FADFA3;background-color:#030307;line-height:25px;padding:0 5px;margin:8px 0","font-size:12px;color:#030307;background-color:#FADFA3;line-height:25px;padding:0 3px"),console.log("%c 联系方式  %c 4002-106-2335 ","font-size:12px;color:white;background-color:#FF4081;line-height:25px;padding:0 5px;margin:7px 0","font-size:12px;color:white;background-color:#424242;line-height:25px;padding:0 3px")},2e3)},exit:function(e,t){var n=this;n.$http.post("/logout?key="+e+"&session="+t).then(function(o){200===o.status&&200!==o.data.code&&setTimeout(function(){n.$http.post("/logout?key="+e+"&session="+t)},1e3)}).catch(function(){setTimeout(function(){n.$http.post("/logout?key="+e+"&session="+t)},1e3)})}},created:function(){var e=this;if(localStorage.getItem("store")&&(this.$store.replaceState(i()({},this.$store.state,JSON.parse(localStorage.getItem("store")))),null!==this.$store.state.user)){var t=this.$store.state.user.accountNumber;this.$http.post("/user/existKey?key="+t).then(function(n){if(200===n.data.code)if(n.data.data)e.$http.post("/user/userState?accountNumber="+t).then(function(n){200===n.data.code&&(n.data.data?e.$http.post("/vip/existsVip?accountNumber="+t).then(function(t){if(200===t.data.code){var n=e.$store.state.user;n.isVip=t.data.data,e.$store.commit("setUser",n)}}).catch(function(t){e.$msg.error(t)}):(e.exit(t,e.$store.state.token),e.log(),e.clearInfo(),e.$msg.error("您的帐号存在异常行为，已被封停（请联系工作人员）")))}).catch(function(t){e.$msg.error(t)});else{var o=["帐号："+t,"已被注销（有疑问请联系工作人员）"],r=[],a=e.$createElement,u=0;for(u in o)o.hasOwnProperty(u)&&r.push(a("p",null,o[u]));e.$notify({title:"警告",message:a("div",null,r),type:"warning"}),e.clearInfo()}}).catch(function(t){e.$msg.error(t)})}window.addEventListener("beforeunload",function(){0!==localStorage.length?localStorage.setItem("store",a()(e.$store.state)):e.$router.push("/loginForm")})}},c={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var m=n("VU/8")(s,c,!1,function(e){n("Ne0W")},null,null).exports,h=n("IcnI"),d=n("mtWM"),p=n.n(d),f=n("zL8q"),g=n.n(f);n("tvR6");var R=n("Y81h"),b=n.n(R),v=(n("UVIz"),n("uJe8"),n("Zrlr")),A=n.n(v),N=n("wxAW"),w=n.n(N),y=n("5QVw"),P=n.n(y)()("showMessage"),x=new(function(){function e(){A()(this,e)}return w()(e,[{key:"success",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this[P]("success",e,t)}},{key:"warning",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this[P]("warning",e,t)}},{key:"info",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this[P]("info",e,t)}},{key:"error",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this[P]("error",e,t)}},{key:P,value:function(e,t,n){n?0===document.getElementsByClassName("el-message").length&&f.Message[e](t):f.Message[e](t)}}]),e}()),$=n("mw3O"),O=n.n($),k=n("dO3j"),q=n.n(k),S=n("r6k1"),L=n.n(S);n("GQvZ");o.default.prototype.$VAR=VAR,n("r6k1").polyfill(),L.a.polyfill(),o.default.prototype.$msg=x,o.default.prototype.$axios=p.a,o.default.prototype.$http=p.a.create({baseURL:VAR.http,timeout:3e4}),o.default.prototype.$qs=O.a,o.default.use(q.a),o.default.use(g.a),function(){var e=this;p.a.interceptors.request.use(function(e){return h.a.state.token&&(e.headers.token=h.a.state.token),e}),p.a.interceptors.response.use(function(t){if(200===t.status){var n=t.data;switch(n.code){case 401:h.a.commit("setToken",null),h.a.commit("setRole",null),h.a.commit("setUser",null),h.a.commit("setRoleInfo",null),localStorage.clear(),Object(f.Notification)({title:"警告",message:n.message,type:"warning"}),l.a.replace({path:"/loginForm"});break;case 403:e.$msg.warning({message:n.message,showClose:!0,duration:2e3})}}return t})}(),new o.default({el:"#app",router:l.a,store:h.a,components:{App:m},template:"<App/>"}),b.a.configure({easing:"ease",speed:500,showSpinner:!1,trickleSpeed:200,minimum:.3}),l.a.beforeEach(function(e,t,n){b.a.start(),e.matched.some(function(e){return e.meta.requiresAuth})&&null===h.a.state.token&&(Object(f.Notification)({title:"警告",message:"请先登录！",type:"warning"}),n({path:"/loginForm"})),e.matched.some(function(e){return e.meta.productRole})?h.a.state.role&&-1===h.a.state.role.indexOf(VAR.adminRole)&&-1===h.a.state.role.indexOf(VAR.productRole)&&n("/NoAccess"):e.matched.some(function(e){return e.meta.orderRole})?h.a.state.role&&-1===h.a.state.role.indexOf(VAR.adminRole)&&-1===h.a.state.role.indexOf(VAR.orderRole)&&n("/NoAccess"):e.matched.some(function(e){return e.meta.userRole})&&h.a.state.role&&-1===h.a.state.role.indexOf(VAR.adminRole)&&-1===h.a.state.role.indexOf(VAR.userRole)&&n("/NoAccess"),"/login"===e.path&&n({path:"/loginForm"}),"/HomePage"===e.path&&h.a.state.role&&-1!==h.a.state.role.indexOf(VAR.ordinaryRole)?"/MallHome"!==t.path?n({path:"/MallHome"}):l.a.go(0):"/MallHome"===e.path&&h.a.state.role&&-1===h.a.state.role.indexOf(VAR.ordinaryRole)?"/HomePage"!==t.path?n({path:"/HomePage"}):l.a.go(0):n()}),l.a.afterEach(function(){b.a.done()})},Ne0W:function(e,t){},UVIz:function(e,t){},YaEn:function(e,t,n){"use strict";var o=n("7+uW"),r=n("/ocq");o.default.use(r.a),t.a=new r.a({routes:[{path:"/",redirect:function(){try{return-1!==JSON.parse(localStorage.getItem("store")).role.indexOf("顾客")?"/MallHome":"/HomePage"}catch(e){return"/MallHome"}}},{path:"/login",name:"Login",component:function(){return n.e(8).then(n.bind(null,"OSSM"))},children:[{path:"/loginForm",name:"登录",component:function(){return n.e(10).then(n.bind(null,"g7y8"))}},{path:"/registerForm",name:"注册",component:function(){return n.e(4).then(n.bind(null,"tBNf"))}},{path:"/resetPwdForm",name:"找回密码",component:function(){return n.e(3).then(n.bind(null,"Zouz"))}}]},{path:"/home",name:"Home",component:function(){return n.e(2).then(n.bind(null,"8B5b"))},children:[{path:"/HomePage",name:"首页",component:function(){return n.e(5).then(n.bind(null,"zq07"))},meta:{requiresAuth:!0}},{path:"/MallHome",name:"商城首页",component:function(){return Promise.all([n.e(1),n.e(0)]).then(n.bind(null,"zzfW"))}},{path:"/MallProduct",name:"商城商品",component:function(){return Promise.all([n.e(0),n.e(29)]).then(n.bind(null,"nKos"))}},{path:"/MallPurchase",name:"购买商品",component:function(){return Promise.all([n.e(0),n.e(16)]).then(n.bind(null,"J04f"))},meta:{requiresAuth:!0,headerName:[{name:"购买商品"}]}},{path:"/MyOrder",name:"我的订单",component:function(){return Promise.all([n.e(0),n.e(12)]).then(n.bind(null,"nqId"))},meta:{requiresAuth:!0,headerName:[{name:"我的订单"}]}},{path:"/ProductList",name:"商品列表",component:function(){return n.e(22).then(n.bind(null,"HN3k"))},meta:{requiresAuth:!0,productRole:!0,headerName:[{name:"商品",url:"/ProductList"},{name:"商品列表"}]}},{path:"/ProductAdd",name:"添加商品",component:function(){return n.e(18).then(n.bind(null,"+EVV"))},meta:{requiresAuth:!0,productRole:!0,headerName:[{name:"商品",url:"/ProductList"},{name:"添加商品"}]}},{path:"/ProductType",name:"商品类别",component:function(){return n.e(15).then(n.bind(null,"UgUa"))},meta:{requiresAuth:!0,productRole:!0,headerName:[{name:"商品",url:"/ProductList"},{name:"商品类别"}]}},{path:"/ProductBrand",name:"商品品牌",component:function(){return n.e(6).then(n.bind(null,"fRfP"))},meta:{requiresAuth:!0,productRole:!0,headerName:[{name:"商品",url:"/ProductList"},{name:"商品品牌"}]}},{path:"/ProductSpecs",name:"商品规格",component:function(){return n.e(21).then(n.bind(null,"nOx3"))},meta:{requiresAuth:!0,productRole:!0,headerName:[{name:"商品",url:"/ProductList"},{name:"商品规格"}]}},{path:"/Purchase",name:"商品采购",component:function(){return n.e(25).then(n.bind(null,"Dn2r"))},meta:{requiresAuth:!0,productRole:!0,headerName:[{name:"商品",url:"/ProductList"},{name:"商品采购"}]}},{path:"/Supplier",name:"供应商管理",component:function(){return n.e(28).then(n.bind(null,"nhah"))},meta:{requiresAuth:!0,productRole:!0,headerName:[{name:"商品",url:"/ProductList"},{name:"供应商管理"}]}},{path:"/OrderList",name:"订单列表",component:function(){return n.e(9).then(n.bind(null,"DdJ0"))},meta:{requiresAuth:!0,orderRole:!0,headerName:[{name:"订单",url:"/OrderList"},{name:"订单列表"}]}},{path:"/OrderDetail",name:"订单详情",component:function(){return n.e(24).then(n.bind(null,"POLg"))},meta:{requiresAuth:!0,orderRole:!0,headerName:[{name:"订单",url:"/OrderList"},{name:"订单详情"}]}},{path:"/ReturnReason",name:"退货原因设置",component:function(){return n.e(7).then(n.bind(null,"DuFj"))},meta:{requiresAuth:!0,orderRole:!0,headerName:[{name:"订单",url:"/OrderList"},{name:"退货原因设置"}]}},{path:"/ReturnGoods",name:"退货申请处理",component:function(){return n.e(27).then(n.bind(null,"p95f"))},meta:{requiresAuth:!0,orderRole:!0,headerName:[{name:"订单",url:"/OrderList"},{name:"退货申请处理"}]}},{path:"/SlideShow",name:"商品轮播图",component:function(){return n.e(26).then(n.bind(null,"vDop"))},meta:{requiresAuth:!0,orderRole:!0,headerName:[{name:"营销",url:"/SlideShow"},{name:"商品轮播图"}]}},{path:"/UserList",name:"用户列表",component:function(){return n.e(11).then(n.bind(null,"H9Oo"))},meta:{requiresAuth:!0,userRole:!0,headerName:[{name:"权限",url:"/UserList"},{name:"用户列表"}]}},{path:"/RoleList",name:"角色列表",component:function(){return n.e(13).then(n.bind(null,"NN8W"))},meta:{requiresAuth:!0,userRole:!0,headerName:[{name:"权限",url:"/UserList"},{name:"角色列表"}]}},{path:"/personalCenter",name:"个人中心",component:function(){return Promise.all([n.e(0),n.e(23)]).then(n.bind(null,"UrGH"))},meta:{requiresAuth:!0,headerName:[{name:"个人中心"}]}},{path:"/changePassword",name:"修改密码",component:function(){return n.e(14).then(n.bind(null,"MCyR"))},meta:{requiresAuth:!0,headerName:[{name:"修改密码"}]}},{path:"/shoppingCart",name:"购物车",component:function(){return Promise.all([n.e(0),n.e(19)]).then(n.bind(null,"QwzQ"))},meta:{requiresAuth:!0,headerName:[{name:"购物车"}]}},{path:"/productReview",name:"商品评价",component:function(){return Promise.all([n.e(0),n.e(20)]).then(n.bind(null,"n2RZ"))},meta:{headerName:[{name:"商品评价"}]}},{path:"/NoAccess",name:"暂无权限访问",component:function(){return n.e(17).then(n.bind(null,"LRUJ"))}}]}]});var a=r.a.prototype.push;r.a.prototype.push=function(e){return a.call(this,e).catch(function(e){return e})}},tvR6:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.61e253685bbc29d54065.js.map