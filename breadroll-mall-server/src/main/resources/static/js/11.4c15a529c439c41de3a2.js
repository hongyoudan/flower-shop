webpackJsonp([11],{HV8a:function(t,e){},zzfW:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("ifoU"),n=s.n(i),a={name:"MallHome",components:{MallFooter:s("loKF").a},data:function(){return{carouselImage:["https://spring-oss.oss-cn-beijing.aliyuncs.com/images/img/lb1.jpg","https://spring-oss.oss-cn-beijing.aliyuncs.com/images/img/lb2.jpg","https://spring-oss.oss-cn-beijing.aliyuncs.com/images/img/lb3.jpg","https://spring-oss.oss-cn-beijing.aliyuncs.com/images/img/lb4.webp","https://spring-oss.oss-cn-beijing.aliyuncs.com/images/img/lb5.jpg"],bannerInfo:null,logoUrl:"https://spring-oss.oss-cn-beijing.aliyuncs.com/images/img/bread-roll-logo.png",activeIndex:"",queryProductInfo:"",select:"1",productType:[],productBrand:[],productTypeInfo:[],newProduct:[],productsInfo:null,productsTemp:null,currentX:0,butLFlag:!0,butRFlag:!1,timer:null,product:{productId:"",productUrl:"",productName:"",productDescribe:"",outPrice:""}}},created:function(){var t=this;this.$http.post("/banner/findAll").then(function(e){if(200===e.data.code){t.bannerInfo=e.data.data;for(var s=0;s<t.bannerInfo.length;s++){var i=t.bannerInfo[s].productUrl;t.bannerInfo[s].productUrl=i.substring(i.indexOf("#")+1)}}}).catch(function(e){t.$msg.error(e)}),this.$http.post("/productType/findAllName").then(function(e){200===e.data.code&&(t.productType=e.data.data)}),this.$http.post("/productBrand/findAllName").then(function(e){200===e.data.code&&(t.productBrand=e.data.data)});var e=this;this.$axios.all([this.$http.post("/product/findAllByType"),this.$http.post("/product/findAllSale")]).then(this.$axios.spread(function(t,s){200===t.data.code&&(e.productTypeInfo=t.data.data),200===s.data.code&&(e.productsTemp=s.data.data),e.productsInfo=new n.a;for(var i=0,a=e.productTypeInfo.length;i<a;i++){var r=[],l={};l.typename=e.productTypeInfo[i].product_type,l.urlLeft=e.productTypeInfo[i].type_url_left,l.urlTop=e.productTypeInfo[i].type_url_top;for(var c=0,o=e.productsTemp.length;c<o;c++)e.productsTemp[c].productType===l.typename&&r.push(e.productsTemp[c]);e.productsInfo.set(l,r)}for(var u=0,p=e.productsTemp.length;u<p&&!(u>15);u++)e.newProduct.push(e.productsTemp[u]);e.$nextTick(function(){var t=e.$refs.newInfo,s=e.$refs.newLi,i=e.$refs.newUl;if(t){var n=.19*t.offsetWidth,a=.005*t.offsetWidth,r=(n+a)*s.length;i.style.width=r+"px";for(var l=0,c=s.length;l<c;l++)s[l].style.width=n+"px",s[l].style.marginRight=a+"px",s[l].style.marginLeft=a+"px";e.timer=setInterval(function(){e.newRight(),e.currentX+r<200&&(e.currentX=0,i.style.transform="translate3d("+e.currentX+"px, 0px, 0px)",e.butLFlag=!0,e.butRFlag=!1)},5e3)}})})).catch(function(e){t.$msg.error(e)})},methods:{handleSelect:function(t,e){},buy:function(t){null===this.$store.state.user?(this.$notify({title:"警告",message:"请先登录",type:"warning"}),this.$router.push({path:"/loginForm"})):this.$router.push({path:"/MallPurchase",query:{id:t}})},queryProduct:function(t,e){if(void 0===e)switch(this.select){case"1":e="name";break;case"2":e="type";break;case"3":e="brand"}this.$router.push({path:"/MallProduct",query:{keyword:t,by:e}})},newLeft:function(){var t=this.$refs.newUl,e=this.$refs.newLi,s=5*(e[0].scrollWidth+2*parseInt(e[0].style.marginLeft));switch(this.currentX+=s,Math.abs(this.currentX)/s){case 0:this.butLFlag=!0,this.butRFlag=!1;break;case 1:this.butLFlag=!1,this.butRFlag=!1;break;case 2:this.butLFlag=!1,this.butRFlag=!0}t.style.transform="translate3d("+this.currentX+"px, 0px, 0px)"},newRight:function(){var t=this.$refs.newUl,e=this.$refs.newLi,s=5*(e[0].scrollWidth+2*parseInt(e[0].style.marginLeft));switch(this.currentX-=s,Math.abs(this.currentX)/s){case 0:this.butLFlag=!0,this.butRFlag=!1;break;case 1:this.butLFlag=!1,this.butRFlag=!1;break;case 2:this.butLFlag=!1,this.butRFlag=!0}t.style.transform="translate3d("+this.currentX+"px, 0px, 0px)"}},destroyed:function(){window.clearInterval(this.timer)}},r={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"mall-container"},[s("el-backtop",{staticStyle:{height:"50px",width:"50px"},attrs:{target:".mall-container"}},[s("i",{staticClass:"el-icon-top"})]),t._v(" "),s("div",{staticClass:"mall-nav"},[s("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":t.activeIndex,"collapse-transition":!1,"active-text-color":"#409EFF",mode:"horizontal"},on:{select:t.handleSelect}},[s("el-menu-item",{staticStyle:{width:"12%","margin-left":"10%",position:"relative"},attrs:{index:"1"}},[s("router-link",{staticStyle:{"text-decoration":"none",position:"absolute",right:"0"},attrs:{to:"/MallHome"}},[s("el-image",{staticClass:"animate__animated animate__fadeIn",staticStyle:{width:"220px",height:"60px"},attrs:{src:"https://spring-oss.oss-cn-beijing.aliyuncs.com/images/img/bread-roll-logo.png"}})],1)],1),t._v(" "),s("el-menu-item",{staticStyle:{width:"50%"},attrs:{index:"2"}},[s("el-input",{staticClass:"input-with-select",staticStyle:{height:"45px"},attrs:{placeholder:"请输入内容"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.queryProduct(t.queryProductInfo)}},model:{value:t.queryProductInfo,callback:function(e){t.queryProductInfo=e},expression:"queryProductInfo"}},[s("el-select",{staticStyle:{width:"120px","user-select":"none"},attrs:{slot:"prepend",placeholder:"请选择"},slot:"prepend",model:{value:t.select,callback:function(e){t.select=e},expression:"select"}},[s("el-option",{attrs:{label:"商品名称",value:"1"}}),t._v(" "),s("el-option",{attrs:{label:"商品分类",value:"2"}}),t._v(" "),s("el-option",{attrs:{label:"商品品牌",value:"3"}})],1),t._v(" "),s("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(e){return t.queryProduct(t.queryProductInfo)}},slot:"append"})],1)],1),t._v(" "),s("el-submenu",{staticStyle:{width:"10%"},attrs:{index:"3"}},[s("template",{slot:"title"},[t._v("商品分类")]),t._v(" "),t._l(t.productType,function(e,i){return s("el-menu-item",{key:"3-"+i,attrs:{index:"3-"+i},on:{click:function(s){return t.queryProduct(e,"type")}}},[t._v(t._s(e))])})],2),t._v(" "),s("el-submenu",{staticStyle:{width:"10%"},attrs:{index:"4"}},[s("template",{slot:"title"},[t._v("商品品牌")]),t._v(" "),t._l(t.productBrand,function(e,i){return s("el-menu-item",{key:"4-"+i,attrs:{index:"4-"+i},on:{click:function(s){return t.queryProduct(e,"brand")}}},[t._v(t._s(e))])})],2)],1)],1),t._v(" "),this.bannerInfo?s("div",{staticClass:"slideshow"},[s("el-carousel",{attrs:{height:"480px"}},t._l(t.bannerInfo,function(t){return s("el-carousel-item",{key:t.bannerId},[s("router-link",{staticStyle:{width:"100%",height:"100%"},attrs:{to:t.productUrl}},[s("el-image",{staticStyle:{height:"100%",width:"100%"},attrs:{src:t.bannerUrl}})],1)],1)}),1)],1):s("div",{staticClass:"slideshow"},[s("el-carousel",{attrs:{height:"480px"}},t._l(t.carouselImage,function(t){return s("el-carousel-item",{key:t},[s("el-link",{staticStyle:{width:"100%",height:"100%"},attrs:{href:"#/MallHome"}},[s("el-image",{staticStyle:{height:"100%",width:"100%"},attrs:{src:t}})],1)],1)}),1)],1),t._v(" "),s("div",{staticClass:"new-product"},[s("div",{staticClass:"box-hd"},[s("h2",{staticClass:"new-product-title",staticStyle:{width:"98.5%"}},[t._v("\n        新品专区\n        "),s("div",{staticStyle:{position:"absolute",top:"6px",right:"16px"}},[s("el-button",{staticStyle:{padding:"5px 12px",margin:"0"},attrs:{icon:"el-icon-arrow-left",disabled:t.butLFlag,size:"mini"},on:{click:function(e){return t.newLeft()}}}),t._v(" "),s("el-button",{staticStyle:{padding:"5px 12px",margin:"0"},attrs:{icon:"el-icon-arrow-right",disabled:t.butRFlag,size:"mini"},on:{click:function(e){return t.newRight()}}})],1)])]),t._v(" "),s("div",{staticStyle:{overflow:"hidden"}},[s("div",{staticClass:"new-sale"},[s("div",{staticClass:"name"},[t._v("\n          花卷买卖\n        ")]),t._v(" "),s("el-image",{staticClass:"animate__animated animate__flip",staticStyle:{width:"100px",padding:"20px"},attrs:{src:"https://spring-oss.oss-cn-beijing.aliyuncs.com/images/img/nurse.png"}}),t._v(" "),s("h3",[t._v("新品专区")])],1),t._v(" "),s("div",{ref:"newInfo",staticClass:"new-product-info"},[s("ul",{ref:"newUl",staticClass:"sale-list"},t._l(this.newProduct,function(e,i){return s("li",{key:i,ref:"newLi",refInFor:!0,on:{click:function(s){return t.buy(e.productId)}}},[s("el-image",{staticClass:"img",attrs:{src:e.productUrl}}),t._v(" "),s("h3",{staticClass:"title"},[e.isNew?s("el-tag",{staticStyle:{"margin-right":"3px"},attrs:{type:"warning",size:"mini"}},[t._v("新品")]):t._e(),t._v("\n              "+t._s(e.productName)+"\n            ")],1),t._v(" "),s("p",{staticClass:"desc"},[t._v(t._s(e.productDescribe))]),t._v(" "),s("p",{staticClass:"price"},[s("span",[t._v(t._s(e.outPrice))]),t._v("元")])],1)}),0)])])]),t._v(" "),s("div",{staticClass:"product clearfix"},t._l(this.productsInfo,function(e,i){return s("div",{key:i,staticClass:"product-info"},[s("el-image",{staticStyle:{height:"100px",margin:"30px 0 0",width:"98.5%","min-width":"1325px"},attrs:{lazy:"","scroll-container":".mall-container",src:e[0].urlTop}}),t._v(" "),s("div",{staticClass:"box-hd"},[s("h2",{staticClass:"product-type-title"},[t._v("\n          "+t._s(e[0].typename)+"\n        ")]),t._v(" "),s("div",{staticClass:"more",on:{click:function(s){return t.queryProduct(e[0].typename,"type")}}},[t._v("\n          查看更多\n          "),s("i",{staticClass:"el-icon-video-play"})])]),t._v(" "),s("ul",{staticClass:"product-type-promo"},[s("li",[s("el-image",{staticStyle:{height:"100%",width:"100%"},attrs:{lazy:"","scroll-container":".mall-container",src:e[0].urlLeft},nativeOn:{click:function(s){return t.queryProduct(e[0].typename,"type")}}})],1)]),t._v(" "),0!==e[1].length?s("ul",{staticClass:"product-item"},t._l(e[1],function(e,i){return s("li",{key:i,on:{click:function(s){return t.buy(e.productId)}}},[s("a",[s("el-image",{attrs:{lazy:"","scroll-container":".mall-container",src:e.productUrl}}),t._v(" "),s("h3",{staticClass:"title"},[e.isNew?s("el-tag",{staticStyle:{"margin-right":"3px"},attrs:{type:"warning",size:"mini"}},[t._v("新品")]):t._e(),t._v("\n              "+t._s(e.productName))],1),t._v(" "),s("p",{staticClass:"desc"},[t._v(t._s(e.productDescribe))]),t._v(" "),s("p",{staticClass:"price"},[s("span",{staticClass:"num"},[t._v(t._s(e.outPrice))]),t._v("元"),s("span",[t._v("起")])])],1)])}),0):s("div",{staticClass:"clearfix",staticStyle:{float:"left",display:"flex","justify-content":"center","align-items":"center",width:"83%",height:"75%","background-color":"#FFF"}},[s("el-image",{staticStyle:{width:"410px"},attrs:{src:"https://spring-oss.oss-cn-beijing.aliyuncs.com/images/img/noproduct.png"}})],1)],1)}),0),t._v(" "),s("MallFooter")],1)},staticRenderFns:[]};var l=s("VU/8")(a,r,!1,function(t){s("HV8a")},null,null);e.default=l.exports}});
//# sourceMappingURL=11.4c15a529c439c41de3a2.js.map