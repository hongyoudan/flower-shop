{"version":3,"sources":["webpack:///src/components/user/RoleList.vue","webpack:///./src/components/user/RoleList.vue?2646","webpack:///./src/components/user/RoleList.vue"],"names":["RoleList","name","data","roleInfo","VAR","this","$VAR","roleInfoResource","roleDialogVisible","handleIndex","insert","roleInfoForm","key","alterForm","roleId","roleName","roleDescribe","roleState","alterRules","required","message","trigger","min","max","methods","queryRoleInfo","length","i","len","indexOf","push","resetForm","formName","$refs","resetFields","openChange","index","submitChange","_this","validate","valid","$http","post","then","rep","code","$alert","confirmButtonText","type","loading","$loading","lock","text","background","$qs","stringify","close","reqInfo","$notify","title","catch","err","$msg","error","addRole","cancelChange","deleteRole","rows","_this2","$confirm","cancelButtonText","_name","splice","isRoleState","_this3","_this4","filter","item","ordinaryRole","created","user_RoleList","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","shadow","staticStyle","text-align","slot","_v","right","on","click","$event","ref","model","inline","label","prop","clearable","placeholder","nativeOn","keyup","_k","keyCode","apply","arguments","value","callback","$$v","$set","expression","position","width","height","border","scopedSlots","_u","fn","scope","disabled","$index","adminRole","change","align","min-width","margin","size","close-on-click-modal","visible","center","update:visible","rules","autosize","padding","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/16.415fc6b38cf8b7df6f98.js","sourcesContent":["<template>\r\n  <div class=\"role-list\">\r\n    <el-card class=\"user-hd\" shadow=\"never\">\r\n      <div slot=\"header\" style=\"text-align: left;\">\r\n        <i class=\"el-icon-search\"/>\r\n        <span>筛选搜索</span>\r\n        <el-button class=\"el-button-search\" style=\"right: 111px\" type=\"primary\" @click=\"queryRoleInfo()\">查询</el-button>\r\n        <el-button class=\"el-button-search\" style=\"right: 20px\" @click=\"resetForm('roleInfoForm')\">重置</el-button>\r\n      </div>\r\n      <el-form :model=\"roleInfoForm\" ref=\"roleInfoForm\" inline class=\"query-form\">\r\n        <el-form-item label=\"输入搜索：\" prop=\"key\">\r\n          <el-input v-model=\"roleInfoForm.key\" @keyup.enter.native=\"queryRoleInfo\" clearable placeholder=\"角色名称/描述\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n    </el-card>\r\n    <el-card class=\"role-box\" shadow=\"never\">\r\n      <div slot=\"header\" style=\"text-align: left;position: relative\">\r\n        <i class=\"el-icon-coin\"/>\r\n        <span>数据列表</span>\r\n        <el-button class=\"el-button-add\" @click=\"addRole\">添加</el-button>\r\n      </div>\r\n      <el-table :data=\"roleInfo\" class=\"type-table\" height=\"425\"  border style=\"width: 100%\">\r\n        <el-table-column prop=\"roleId\" label=\"编号\" width=\"150\"></el-table-column>\r\n        <el-table-column prop=\"roleName\" label=\"角色\" width=\"300\"></el-table-column>\r\n        <el-table-column prop=\"roleDescribe\" label=\"描述\" width=\"500\"></el-table-column>\r\n        <el-table-column label=\"是否启用\" width=\"150\">\r\n          <template slot-scope=\"scope\">\r\n            <el-switch :disabled=\"roleInfo[scope.$index].roleName.indexOf(VAR.adminRole)!==-1||\r\n                        roleInfo[scope.$index].roleName.indexOf(VAR.ordinaryRole)!==-1\"\r\n                       @change=\"isRoleState(scope.$index)\" v-model=\"roleInfo[scope.$index].roleState\"/>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column label=\"操作\" align=\"center\" min-width=\"200\">\r\n          <template slot-scope=\"scope\">\r\n            <el-button size=\"mini\" :disabled=\"roleInfo[scope.$index].roleName.indexOf(VAR.adminRole)!==-1||\r\n                        roleInfo[scope.$index].roleName.indexOf(VAR.ordinaryRole)!==-1\"\r\n                       style=\"margin: 0 2%\" @click=\"openChange(scope.$index)\">编辑</el-button>\r\n            <el-button size=\"mini\" :disabled=\"roleInfo[scope.$index].roleName.indexOf(VAR.adminRole)!==-1||\r\n                        roleInfo[scope.$index].roleName.indexOf(VAR.ordinaryRole)!==-1\"\r\n                       style=\"margin: 0 2%\" type=\"danger\" slot=\"reference\" @click=\"deleteRole(scope.$index, roleInfo)\">删除</el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n    </el-card>\r\n    <el-dialog title=\"编辑角色信息\" class=\"user-dialog\" :close-on-click-modal=\"false\" :visible.sync=\"roleDialogVisible\" center>\r\n      <el-form class=\"info-form\" inline :rules=\"alterRules\" :model=\"alterForm\" ref='changeFrom'>\r\n        <el-form-item label=\"角色名称：\" prop=\"roleName\" style=\"width: 100%\">\r\n          <el-input size=\"small\" v-model=\"alterForm.roleName\" placeholder=\"角色名称\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"角色描述：\" prop=\"roleDescribe\" style=\"width: 100%\">\r\n          <el-input size=\"small\" type=\"textarea\" autosize v-model=\"alterForm.roleDescribe\" placeholder=\"角色描述\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button type=\"primary\" style=\"padding: 12px 54px;margin: 0 55px;\" @click=\"submitChange('changeFrom')\">确 定</el-button>\r\n        <el-button style=\"padding: 12px 54px;margin: 0 55px;\" @click=\"cancelChange('changeFrom')\">取 消</el-button>\r\n      </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  export default {\r\n    name: \"RoleList\",\r\n    data(){\r\n      return{\r\n        roleInfo:[],\r\n        VAR : this.$VAR,\r\n        roleInfoResource:[],\r\n        roleDialogVisible:false,\r\n        handleIndex:0,\r\n        insert:false,\r\n        roleInfoForm:{\r\n          key:''\r\n        },\r\n        alterForm:{\r\n          roleId:'',\r\n          roleName:'',\r\n          roleDescribe:'',\r\n          roleState:1,\r\n        },\r\n        alterRules:{\r\n          roleName: [{ required: true, message: '请输入角色名称', trigger: 'blur' },\r\n            { min: 1, max: 30, message: '名称长度不允许超过 30 个字符', trigger: 'blur' }],\r\n          roleDescribe: [{ required: true, message: '请输入角色描述', trigger: 'blur' },\r\n            { min: 1, max: 100, message: '描述信息长度不允许超过 100 个字符', trigger: 'blur' }]\r\n        }\r\n      }\r\n    },\r\n    methods:{\r\n      queryRoleInfo(){\r\n        if(this.roleInfoForm.key.length!==0){\r\n          this.roleInfo=[];\r\n          for(let i=0,len=this.roleInfoResource.length;i<len;i++){\r\n            if(this.roleInfoResource[i].roleName.indexOf(this.roleInfoForm.key)!==-1){\r\n              this.roleInfo.push(this.roleInfoResource[i]);\r\n            }else if(this.roleInfoResource[i].roleDescribe.indexOf(this.roleInfoForm.key)!==-1){\r\n              this.roleInfo.push(this.roleInfoResource[i]);\r\n            }\r\n          }\r\n        }else{\r\n          this.roleInfo = this.roleInfoResource;\r\n        }\r\n      },\r\n      resetForm(formName) {\r\n        this.$refs[formName].resetFields();\r\n      },\r\n      openChange(index){\r\n        this.handleIndex=index;\r\n        this.insert=false;\r\n        this.alterForm = this.roleInfo[index];\r\n        this.roleDialogVisible=true;\r\n      },\r\n      submitChange(formName){\r\n        this.$refs[formName].validate((valid) => {\r\n          if (valid) {\r\n            if(this.insert){\r\n              this.$http.post('/role/existRoleName?roleId=0&roleName='+this.alterForm.roleName).then((rep)=>{\r\n                if(rep.data.code===200){\r\n                  if(rep.data.data){\r\n                    this.$alert('角色('+this.alterForm.roleName+')\\t已存在，不能重复添加', '警告', {confirmButtonText: '确定', type:\"warning\"});\r\n                  }else{\r\n                    let loading = this.$loading({lock: true, text: \"数据提交中\",background:\"rgba(255,255,255,0.1)\"});\r\n                    this.$http.post('/role/add',this.$qs.stringify(this.alterForm)).then((rep)=>{\r\n                      loading.close();\r\n                      if(rep.data.code===200){\r\n                        this.roleDialogVisible=false;\r\n                        this.reqInfo();\r\n                        this.$notify({title: '成功', message: '角色('+this.alterForm.roleName+')\\t添加成功', type: 'success'});\r\n                      }else{\r\n                        this.$notify({title: '错误', message: rep.data.message, type: 'error'});\r\n                      }\r\n                    }).catch((err)=>{loading.close();this.$msg.error(err)})\r\n                  }\r\n                }\r\n              }).catch((err)=>{this.$msg.error(err)})\r\n            }else{\r\n              this.$http.post('/role/existRoleName?roleId='+this.roleInfo[this.handleIndex].roleId+'&roleName='+this.alterForm.roleName).then((rep)=> {\r\n                if (rep.data.code === 200) {\r\n                  if (rep.data.data) {\r\n                    this.$alert('角色('+this.alterForm.roleName + ')\\t已存在，无法完成修改操作', '警告', {\r\n                      confirmButtonText: '确定',\r\n                      type: \"warning\"\r\n                    });\r\n                  } else {\r\n                    let loading = this.$loading({lock: true, text: \"数据提交中\",background:\"rgba(255,255,255,0.1)\"});\r\n                    this.$http.post('/role/update', this.$qs.stringify(this.alterForm)).then((rep) => {\r\n                      loading.close();\r\n                      if (rep.data.code === 200) {\r\n                        this.roleDialogVisible = false;\r\n                        this.roleInfo[this.handleIndex] = this.alterForm;\r\n                        this.$notify({title: '成功', message: '角色('+this.roleInfo[this.handleIndex].roleName+')\\t信息更新成功', type: 'success'});\r\n\r\n                      } else {\r\n                        this.$notify({title: '错误', message: rep.data.message, type: 'error'});\r\n                      }\r\n                    }).catch((err) => {\r\n                      loading.close();\r\n                      this.$msg.error(err)\r\n                    })\r\n                  }\r\n                }\r\n              }).catch((err)=>{this.$msg.error(err)})\r\n            }\r\n          } else {\r\n            return false;\r\n          }\r\n        });\r\n      },\r\n      addRole(){\r\n        delete this.alterForm.roleId;\r\n        this.alterForm.roleName='';\r\n        this.alterForm.roleDescribe='';\r\n        this.insert=true;\r\n        this.roleDialogVisible=true;\r\n      },\r\n      cancelChange(formName){\r\n        this.roleDialogVisible=false;\r\n        this.$refs[formName].resetFields();\r\n        this.$notify({title: '操作取消', message: '', type: 'success'});\r\n      },\r\n      deleteRole(index, rows){\r\n        let name = this.roleInfo[index].roleName;\r\n        this.$http.post('/userRole/existsRole?roleId='+this.roleInfo[index].roleId).then((rep)=>{\r\n          if(rep.data.code===200){\r\n            if(rep.data.data){\r\n              this.$alert('角色('+name+')\\t下存在用户，无法删除', '警告', {confirmButtonText: '确定', type:\"warning\"});\r\n            }else{\r\n              this.$confirm('此操作将永久删除该角色信息, 是否继续?', '提示', {\r\n                confirmButtonText: '确定',\r\n                cancelButtonText: '取消',\r\n                type: 'warning'\r\n              }).then(() => {\r\n                let loading = this.$loading({lock: true, text: \"数据提交中\",background:\"rgba(255,255,255,0.1)\"});\r\n                this.$http.post('/role/delete?roleId='+this.roleInfo[index].roleId).then((rep)=>{\r\n                  loading.close();\r\n                  if(rep.data.code === 200){\r\n                    let name = this.roleInfo[index].roleName;\r\n                    rows.splice(index, 1);//删掉该行\r\n                    this.$notify({title: '成功', message: '角色('+name+')\\t移除成功', type: 'success'});\r\n                  }else{\r\n                    this.$notify({title: '错误', message: rep.data.message, type: 'error'});\r\n                  }\r\n                }).catch((err)=>{\r\n                  loading.close();\r\n                  this.$msg.error(err);\r\n                })\r\n              }).catch(() => {\r\n                this.$notify({title: '成功', message: '操作取消', type: 'success'});\r\n              });\r\n            }\r\n          }\r\n        }).catch((err)=>{this.$msg.error(err)})\r\n      },\r\n      isRoleState(index){\r\n        let loading = this.$loading({lock: true, text: \"数据提交中\",background:\"rgba(255,255,255,0.1)\"});\r\n        this.$http.post('/role/update?roleId=' + this.roleInfo[index].roleId + '&roleState=' + this.roleInfo[index].roleState).then((rep) => {\r\n          loading.close();\r\n          if (rep.data.code === 200) {\r\n            if (this.roleInfo[index].roleState) {\r\n              this.$notify({title: '成功', message: this.roleInfo[index].roleName+'\\t已启用', type: 'success'});\r\n            } else {\r\n              this.$notify({title: '成功', message: this.roleInfo[index].roleName+'\\t已禁用', type: 'success'});\r\n            }\r\n          }\r\n        }).catch((err) => {\r\n          loading.close();\r\n          this.$msg.error(err);\r\n        })\r\n      },\r\n      reqInfo(){\r\n        this.$http.post('/role/findAll').then((rep)=>{\r\n          if(rep.data.code===200){\r\n            this.roleInfoResource = this.roleInfo = rep.data.data.filter((item)=> {\r\n                 return item.roleName !== VAR.ordinaryRole;\r\n            });\r\n          }\r\n        }).catch((err)=>{this.$msg.error(err)})\r\n      }\r\n    },\r\n    created() {\r\n      this.reqInfo();\r\n    }\r\n  }\r\n</script>\r\n\r\n<style>\r\n  .role-list{\r\n    margin: 0;\r\n    padding: 0;\r\n    min-height: 94%;\r\n    user-select: none;\r\n    min-width: 1226px;\r\n  }\r\n  .role-list .user-hd{\r\n    height: 138px;\r\n    margin: 30px auto 10px;\r\n    width: 95%;\r\n  }\r\n\r\n  .role-list .user-hd .el-card__header{\r\n    position: relative;\r\n  }\r\n\r\n\r\n  .role-list .info-box{\r\n    height: 600px;\r\n    border:1px solid #EBEEF5;\r\n  }\r\n\r\n  .role-list .user-hd .el-button-search{\r\n    position: absolute;\r\n    top: 14px;\r\n    padding: 3px 0;\r\n    width: 70px;\r\n    height: 30px;\r\n  }\r\n\r\n  .role-list .query-form{\r\n    text-align: left;\r\n  }\r\n\r\n  .role-list .role-box{\r\n    height: 530px;\r\n    margin: 20px auto 10px;\r\n    width: 95%;\r\n  }\r\n\r\n  .role-list .role-box th,.role-list .role-box td{\r\n    text-align: center;\r\n  }\r\n\r\n  .role-list .el-table th.gutter{\r\n    display: table-cell!important;\r\n  }\r\n\r\n  .role-list .info-form{\r\n    position: relative;\r\n  }\r\n\r\n  .role-list .user-dialog{\r\n    min-width: 200px;\r\n  }\r\n\r\n  .role-list .el-card__body{\r\n    user-select: text;\r\n  }\r\n\r\n  .role-list .user-dialog .el-dialog__header{\r\n    text-align: left;\r\n  }\r\n\r\n  .role-list .user-dialog .el-dialog{\r\n    margin-top: 28vh!important;\r\n  }\r\n\r\n  .role-list .role-box .el-button-add{\r\n    position: absolute;\r\n    right: 32px;\r\n    top: -5px;\r\n    padding: 3px 0;\r\n    width: 80px;\r\n    height: 32px;\r\n  }\r\n\r\n  .role-list .el-dialog .el-input__inner{\r\n    width: 500px!important;\r\n  }\r\n\r\n  .role-list .el-dialog .el-textarea__inner{\r\n    height: 180px!important;\r\n    width: 500px!important;\r\n  }\r\n\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/user/RoleList.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"role-list\"},[_c('el-card',{staticClass:\"user-hd\",attrs:{\"shadow\":\"never\"}},[_c('div',{staticStyle:{\"text-align\":\"left\"},attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('i',{staticClass:\"el-icon-search\"}),_vm._v(\" \"),_c('span',[_vm._v(\"筛选搜索\")]),_vm._v(\" \"),_c('el-button',{staticClass:\"el-button-search\",staticStyle:{\"right\":\"111px\"},attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.queryRoleInfo()}}},[_vm._v(\"查询\")]),_vm._v(\" \"),_c('el-button',{staticClass:\"el-button-search\",staticStyle:{\"right\":\"20px\"},on:{\"click\":function($event){return _vm.resetForm('roleInfoForm')}}},[_vm._v(\"重置\")])],1),_vm._v(\" \"),_c('el-form',{ref:\"roleInfoForm\",staticClass:\"query-form\",attrs:{\"model\":_vm.roleInfoForm,\"inline\":\"\"}},[_c('el-form-item',{attrs:{\"label\":\"输入搜索：\",\"prop\":\"key\"}},[_c('el-input',{attrs:{\"clearable\":\"\",\"placeholder\":\"角色名称/描述\"},nativeOn:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.queryRoleInfo.apply(null, arguments)}},model:{value:(_vm.roleInfoForm.key),callback:function ($$v) {_vm.$set(_vm.roleInfoForm, \"key\", $$v)},expression:\"roleInfoForm.key\"}})],1)],1)],1),_vm._v(\" \"),_c('el-card',{staticClass:\"role-box\",attrs:{\"shadow\":\"never\"}},[_c('div',{staticStyle:{\"text-align\":\"left\",\"position\":\"relative\"},attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('i',{staticClass:\"el-icon-coin\"}),_vm._v(\" \"),_c('span',[_vm._v(\"数据列表\")]),_vm._v(\" \"),_c('el-button',{staticClass:\"el-button-add\",on:{\"click\":_vm.addRole}},[_vm._v(\"添加\")])],1),_vm._v(\" \"),_c('el-table',{staticClass:\"type-table\",staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.roleInfo,\"height\":\"425\",\"border\":\"\"}},[_c('el-table-column',{attrs:{\"prop\":\"roleId\",\"label\":\"编号\",\"width\":\"150\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"roleName\",\"label\":\"角色\",\"width\":\"300\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"roleDescribe\",\"label\":\"描述\",\"width\":\"500\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"是否启用\",\"width\":\"150\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-switch',{attrs:{\"disabled\":_vm.roleInfo[scope.$index].roleName.indexOf(_vm.VAR.adminRole)!==-1||\n                      _vm.roleInfo[scope.$index].roleName.indexOf(_vm.VAR.ordinaryRole)!==-1},on:{\"change\":function($event){return _vm.isRoleState(scope.$index)}},model:{value:(_vm.roleInfo[scope.$index].roleState),callback:function ($$v) {_vm.$set(_vm.roleInfo[scope.$index], \"roleState\", $$v)},expression:\"roleInfo[scope.$index].roleState\"}})]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"操作\",\"align\":\"center\",\"min-width\":\"200\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{staticStyle:{\"margin\":\"0 2%\"},attrs:{\"size\":\"mini\",\"disabled\":_vm.roleInfo[scope.$index].roleName.indexOf(_vm.VAR.adminRole)!==-1||\n                      _vm.roleInfo[scope.$index].roleName.indexOf(_vm.VAR.ordinaryRole)!==-1},on:{\"click\":function($event){return _vm.openChange(scope.$index)}}},[_vm._v(\"编辑\")]),_vm._v(\" \"),_c('el-button',{staticStyle:{\"margin\":\"0 2%\"},attrs:{\"slot\":\"reference\",\"size\":\"mini\",\"disabled\":_vm.roleInfo[scope.$index].roleName.indexOf(_vm.VAR.adminRole)!==-1||\n                      _vm.roleInfo[scope.$index].roleName.indexOf(_vm.VAR.ordinaryRole)!==-1,\"type\":\"danger\"},on:{\"click\":function($event){return _vm.deleteRole(scope.$index, _vm.roleInfo)}},slot:\"reference\"},[_vm._v(\"删除\")])]}}])})],1)],1),_vm._v(\" \"),_c('el-dialog',{staticClass:\"user-dialog\",attrs:{\"title\":\"编辑角色信息\",\"close-on-click-modal\":false,\"visible\":_vm.roleDialogVisible,\"center\":\"\"},on:{\"update:visible\":function($event){_vm.roleDialogVisible=$event}}},[_c('el-form',{ref:\"changeFrom\",staticClass:\"info-form\",attrs:{\"inline\":\"\",\"rules\":_vm.alterRules,\"model\":_vm.alterForm}},[_c('el-form-item',{staticStyle:{\"width\":\"100%\"},attrs:{\"label\":\"角色名称：\",\"prop\":\"roleName\"}},[_c('el-input',{attrs:{\"size\":\"small\",\"placeholder\":\"角色名称\"},model:{value:(_vm.alterForm.roleName),callback:function ($$v) {_vm.$set(_vm.alterForm, \"roleName\", $$v)},expression:\"alterForm.roleName\"}})],1),_vm._v(\" \"),_c('el-form-item',{staticStyle:{\"width\":\"100%\"},attrs:{\"label\":\"角色描述：\",\"prop\":\"roleDescribe\"}},[_c('el-input',{attrs:{\"size\":\"small\",\"type\":\"textarea\",\"autosize\":\"\",\"placeholder\":\"角色描述\"},model:{value:(_vm.alterForm.roleDescribe),callback:function ($$v) {_vm.$set(_vm.alterForm, \"roleDescribe\", $$v)},expression:\"alterForm.roleDescribe\"}})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{staticStyle:{\"padding\":\"12px 54px\",\"margin\":\"0 55px\"},attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.submitChange('changeFrom')}}},[_vm._v(\"确 定\")]),_vm._v(\" \"),_c('el-button',{staticStyle:{\"padding\":\"12px 54px\",\"margin\":\"0 55px\"},on:{\"click\":function($event){return _vm.cancelChange('changeFrom')}}},[_vm._v(\"取 消\")])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-5bbe0272\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/user/RoleList.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-5bbe0272\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./RoleList.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./RoleList.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./RoleList.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-5bbe0272\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./RoleList.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/user/RoleList.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}