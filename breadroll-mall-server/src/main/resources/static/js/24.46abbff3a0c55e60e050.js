webpackJsonp([24],{"+tiH":function(e,t){},g7y8:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=o("mvHQ"),r=o.n(s),a=(o("IcnI"),{name:"Login-Form",data:function(){return{checkCodeKey:null,checkCodeUrl:null,rememberMe:!0,loginForm:{userAccount:"",passWord:""},rules:{userAccount:[{required:!0,message:"请输入帐号",trigger:"blur"}],passWord:[{required:!0,message:"请输入密码",trigger:"blur"}]}}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=t.$loading({lock:!0,text:"登录中",background:"rgba(255,255,255,0.1)"});t.$http.post("/login?username="+t.loginForm.userAccount+"&password="+t.loginForm.passWord).then(function(e){if(o.close(),200===e.data.code){e.data.data.role;localStorage.setItem("satoken",e.data.data.sessionId),t.$store.commit("setToken",e.data.data.sessionId),t.$store.commit("setRole",e.data.data.role),t.$store.commit("setUser",e.data.data.user),t.$store.commit("setRoleInfo",e.data.data.roleInfo),t.$http.post("/vip/existsVip?accountNumber="+t.loginForm.userAccount).then(function(o){if(200===o.data.code){var s=t.$store.state.user;s.isVip=o.data.data,t.$store.commit("setUser",s),localStorage.setItem("store",r()(t.$store.state));var a=(new Date).getHours(),i=void 0;i=a>7&&a<12?"上午好!":a>=12&&a<=13?"中午好!":a>13&&a<=18?"下午好!":"晚上好!";var n="欢迎登录花卷商城";"ADMIN"===s.status&&(n+="后台系统"),t.$notify({title:i,message:n,type:"success",offset:50}),"ADMIN"===s.status?t.$router.push("/HomePage"):t.$router.push("/MallHome")}else t.$msg.error({message:e.data.message,showClose:!0,duration:1500})}).catch(function(e){console.error(e),t.$msg.error(e)})}else t.$msg.error({message:e.data.message,showClose:!0,duration:1500})}).catch(function(e){o.close(),t.$msg.error({message:"登录失败，"+e,showClose:!0,duration:1500})})})}},created:function(){}}),i={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"login-form"},[o("el-header",{staticClass:"header",attrs:{height:"45px"}},[o("h2",{staticClass:"title"},[e._v("登录")]),e._v(" "),o("span",{staticClass:"pull-right"},[e._v("\n      没有账号？\n      "),o("router-link",{staticClass:"link",attrs:{to:"/registerForm"}},[e._v("点此注册")])],1)]),e._v(" "),o("div",{staticClass:"form"},[o("el-form",{ref:"loginForm",attrs:{model:e.loginForm,"status-icon":"",rules:e.rules}},[o("el-form-item",{attrs:{prop:"userAccount"}},[o("el-input",{attrs:{autocomplete:"on",placeholder:"请输入帐号","prefix-icon":"el-icon-user"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submitForm("loginForm")}},model:{value:e.loginForm.userAccount,callback:function(t){e.$set(e.loginForm,"userAccount",t)},expression:"loginForm.userAccount"}})],1),e._v(" "),o("el-form-item",{staticStyle:{"margin-bottom":"10px"},attrs:{prop:"passWord"}},[o("el-input",{attrs:{type:"password","show-password":"",autocomplete:"off",placeholder:"请输入密码","prefix-icon":"el-icon-lock"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submitForm("loginForm")}},model:{value:e.loginForm.passWord,callback:function(t){e.$set(e.loginForm,"passWord",t)},expression:"loginForm.passWord"}})],1),e._v(" "),o("el-form-item",{staticStyle:{"margin-bottom":"5px"}},[o("el-checkbox",{model:{value:e.rememberMe,callback:function(t){e.rememberMe=t},expression:"rememberMe"}},[e._v("记住我")]),e._v(" "),o("router-link",{staticClass:"retrieve-password",attrs:{to:"/forgotPassword"}},[e._v("找回密码")])],1),e._v(" "),o("el-form-item",{staticStyle:{"margin-bottom":"10px"}},[o("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],staticClass:"submit",attrs:{type:"primary"},on:{click:function(t){return e.submitForm("loginForm")}}},[e._v("登录")])],1)],1)],1),e._v(" "),o("div",{staticStyle:{width:"90%",margin:"0 auto","text-align":"center"}},[o("el-divider",[e._v("其他方式登录")]),e._v(" "),e._m(0)],1)],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"my-icon"},[t("i",{staticClass:"iconfont iconqq qq"}),this._v(" "),t("i",{staticClass:"iconfont iconweixin weixin"}),this._v(" "),t("i",{staticClass:"iconfont icondingding01 dingding"})])}]};var n=o("VU/8")(a,i,!1,function(e){o("+tiH")},"data-v-24fdf37a",null);t.default=n.exports}});
//# sourceMappingURL=24.46abbff3a0c55e60e050.js.map