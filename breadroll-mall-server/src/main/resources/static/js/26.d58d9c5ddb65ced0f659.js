webpackJsonp([26],{tBNf:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s={name:"Register_Form",data:function(){var e=this;return{checkCodeErrorMessage:null,codeButtonTemp:null,rememberMe:!1,codeRight:!0,registerForm:{userAccount:"",userName:"",passWord:"",checkCode:""},rules:{userAccount:[{validator:function(r,t,s){if(""!==t)return e.$tools.checkEmail(t)&&s(),s(new Error("请输入正确的邮箱"));s(new Error("请输入邮箱"))},trigger:"blur"}],userName:[{required:!0,message:"请输入姓名",trigger:"blur"}],checkCode:[{required:!0,message:"请输入邮箱验证码",trigger:"blur"}],passWord:[{validator:function(r,t,s){if(""!==t)return e.$tools.checkPass(t)&&s(),s(new Error("以字母开头，长度在6~18之间，只能包含字母、数字和下划线"));s(new Error("请输入密码"))},trigger:"blur"}]}}},methods:{submitForm:function(e){var r=this;this.$refs[e].validate(function(e){if(!e)return!1;r.$http.post("/allow/checkCode?key="+r.registerForm.userAccount+"&code="+r.registerForm.checkCode).then(function(e){if(200===e.data.code)if(e.data.data){var t=r.$loading({lock:!0,text:"数据提交中",background:"rgba(255,255,255,0.1)"});r.$http.post("/allow/add?accountNumber="+r.registerForm.userAccount+"&password="+r.registerForm.passWord+"&userName="+r.registerForm.userName).then(function(e){t.close(),200===e.data.code?(r.$msg.success({message:e.data.message,duration:1500}),r.$http.post("/allow/sendHtmlRegister?email="+r.registerForm.userAccount+"&name="+r.registerForm.userName+"&password="+r.registerForm.passWord),r.$router.push("/loginForm")):r.$msg.error({message:e.data.message,showClose:!0,duration:1500})}).catch(function(){t.close(),r.$msg.error({message:"注册失败，请稍后再试~",showClose:!0,duration:1500})})}else r.$msg.warning({message:e.data.message,duration:1500});else r.$msg.error({message:e.data.message,showClose:!0,duration:1500})}).catch(function(){r.$msg.error({message:"注册失败，请稍后再试~",showClose:!0,duration:1500})})})},sendEmailCode:function(e,r){var t=this;this.codeButtonTemp=r.currentTarget;var s=!0;this.$refs[e].validateField("userAccount",function(e){s=""===e}),this.$refs[e].validateField("userName",function(e){s=s&&""===e}),s&&this.$http.post("/allow/sendHtmlCode?email="+this.registerForm.userAccount).then(function(e){200===e.data.code?(t.codeRight=!1,t.$countDown.setItem(t.codeButtonTemp),t.$message.success("验证码发送成功")):500===e.data.code&&t.$msg.warning(e.data.message)}).catch(function(e){t.checkCodeErrorMessage=e.message,t.$msg.error("验证码发送失败，请稍后重试！"),t.checkCodeErrorMessage=null})}},created:function(){}},o={render:function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"register-form"},[t("el-header",{staticClass:"header",attrs:{height:"45px"}},[t("h2",{staticClass:"title"},[e._v("注册")]),e._v(" "),t("span",{staticClass:"pull-right"},[e._v("\n    已有账号？\n    "),t("router-link",{staticClass:"link",attrs:{to:"/loginForm"}},[e._v("点此登录")])],1)]),e._v(" "),t("div",{staticClass:"form"},[t("el-form",{ref:"registerForm",attrs:{model:e.registerForm,"status-icon":"",rules:e.rules}},[t("el-form-item",{attrs:{prop:"userName"}},[t("el-input",{attrs:{autocomplete:"on",placeholder:"请输入昵称","prefix-icon":"el-icon-user"},model:{value:e.registerForm.userName,callback:function(r){e.$set(e.registerForm,"userName",r)},expression:"registerForm.userName"}})],1),e._v(" "),t("el-form-item",{attrs:{prop:"userAccount"}},[t("el-input",{attrs:{autocomplete:"off",placeholder:"请输入邮箱","prefix-icon":"el-icon-message"},model:{value:e.registerForm.userAccount,callback:function(r){e.$set(e.registerForm,"userAccount",r)},expression:"registerForm.userAccount"}})],1),e._v(" "),t("el-form-item",{attrs:{prop:"checkCode"}},[t("el-input",{attrs:{disabled:e.codeRight,autocomplete:"off",placeholder:"邮箱验证码","prefix-icon":"el-icon-link"},model:{value:e.registerForm.checkCode,callback:function(r){e.$set(e.registerForm,"checkCode",r)},expression:"registerForm.checkCode"}}),e._v(" "),t("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],staticStyle:{position:"absolute",right:"0",width:"40%",top:"0"},attrs:{plain:""},on:{click:function(r){return e.sendEmailCode("registerForm",r)}}},[e._v("发送验证码\n        ")])],1),e._v(" "),t("el-form-item",{attrs:{prop:"passWord"}},[t("el-input",{attrs:{type:"password","auto-complete":"new-password","show-password":"",autocomplete:"off",placeholder:"请输入密码","prefix-icon":"el-icon-lock"},model:{value:e.registerForm.passWord,callback:function(r){e.$set(e.registerForm,"passWord",r)},expression:"registerForm.passWord"}})],1),e._v(" "),t("el-form-item",[t("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],staticClass:"submit",attrs:{type:"primary"},on:{click:function(r){return e.submitForm("registerForm")}}},[e._v("注册")])],1)],1)],1)],1)},staticRenderFns:[]};var a=t("VU/8")(s,o,!1,function(e){t("zsb2")},null,null);r.default=a.exports},zsb2:function(e,r){}});
//# sourceMappingURL=26.d58d9c5ddb65ced0f659.js.map